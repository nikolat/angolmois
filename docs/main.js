/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={9822:(e,t)=>{"use strict";function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function r(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function o(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function i(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("hash must be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function s(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function a(e,t){o(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(t,"__esModule",{value:!0}),t.output=t.exists=t.hash=t.bytes=t.bool=t.number=void 0,t.number=n,t.bool=r,t.bytes=o,t.hash=i,t.exists=s,t.output=a;const c={number:n,bool:r,bytes:o,hash:i,exists:s,output:a};t.default=c},4876:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.poly1305=t.wrapConstructorWithKey=void 0;const r=n(8225),o=n(9822),i=(e,t)=>255&e[t++]|(255&e[t++])<<8;class s{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=(0,r.toBytes)(e),(0,r.ensureBytes)(e,32);const t=i(e,0),n=i(e,2),o=i(e,4),s=i(e,6),a=i(e,8),c=i(e,10),u=i(e,12),l=i(e,14);this.r[0]=8191&t,this.r[1]=8191&(t>>>13|n<<3),this.r[2]=7939&(n>>>10|o<<6),this.r[3]=8191&(o>>>7|s<<9),this.r[4]=255&(s>>>4|a<<12),this.r[5]=a>>>1&8190,this.r[6]=8191&(a>>>14|c<<2),this.r[7]=8065&(c>>>11|u<<5),this.r[8]=8191&(u>>>8|l<<8),this.r[9]=l>>>5&127;for(let t=0;t<8;t++)this.pad[t]=i(e,16+2*t)}process(e,t,n=!1){const r=n?0:2048,{h:o,r:s}=this,a=s[0],c=s[1],u=s[2],l=s[3],d=s[4],f=s[5],h=s[6],p=s[7],y=s[8],b=s[9],g=i(e,t+0),m=i(e,t+2),v=i(e,t+4),w=i(e,t+6),_=i(e,t+8),E=i(e,t+10),x=i(e,t+12),k=i(e,t+14);let B=o[0]+(8191&g),O=o[1]+(8191&(g>>>13|m<<3)),S=o[2]+(8191&(m>>>10|v<<6)),A=o[3]+(8191&(v>>>7|w<<9)),I=o[4]+(8191&(w>>>4|_<<12)),T=o[5]+(_>>>1&8191),C=o[6]+(8191&(_>>>14|E<<2)),j=o[7]+(8191&(E>>>11|x<<5)),L=o[8]+(8191&(x>>>8|k<<8)),P=o[9]+(k>>>5|r),H=0,N=H+B*a+O*(5*b)+S*(5*y)+A*(5*p)+I*(5*h);H=N>>>13,N&=8191,N+=T*(5*f)+C*(5*d)+j*(5*l)+L*(5*u)+P*(5*c),H+=N>>>13,N&=8191;let U=H+B*c+O*a+S*(5*b)+A*(5*y)+I*(5*p);H=U>>>13,U&=8191,U+=T*(5*h)+C*(5*f)+j*(5*d)+L*(5*l)+P*(5*u),H+=U>>>13,U&=8191;let q=H+B*u+O*c+S*a+A*(5*b)+I*(5*y);H=q>>>13,q&=8191,q+=T*(5*p)+C*(5*h)+j*(5*f)+L*(5*d)+P*(5*l),H+=q>>>13,q&=8191;let M=H+B*l+O*u+S*c+A*a+I*(5*b);H=M>>>13,M&=8191,M+=T*(5*y)+C*(5*p)+j*(5*h)+L*(5*f)+P*(5*d),H+=M>>>13,M&=8191;let R=H+B*d+O*l+S*u+A*c+I*a;H=R>>>13,R&=8191,R+=T*(5*b)+C*(5*y)+j*(5*p)+L*(5*h)+P*(5*f),H+=R>>>13,R&=8191;let D=H+B*f+O*d+S*l+A*u+I*c;H=D>>>13,D&=8191,D+=T*a+C*(5*b)+j*(5*y)+L*(5*p)+P*(5*h),H+=D>>>13,D&=8191;let F=H+B*h+O*f+S*d+A*l+I*u;H=F>>>13,F&=8191,F+=T*c+C*a+j*(5*b)+L*(5*y)+P*(5*p),H+=F>>>13,F&=8191;let z=H+B*p+O*h+S*f+A*d+I*l;H=z>>>13,z&=8191,z+=T*u+C*c+j*a+L*(5*b)+P*(5*y),H+=z>>>13,z&=8191;let K=H+B*y+O*p+S*h+A*f+I*d;H=K>>>13,K&=8191,K+=T*l+C*u+j*c+L*a+P*(5*b),H+=K>>>13,K&=8191;let $=H+B*b+O*y+S*p+A*h+I*f;H=$>>>13,$&=8191,$+=T*d+C*l+j*u+L*c+P*a,H+=$>>>13,$&=8191,H=(H<<2)+H|0,H=H+N|0,N=8191&H,H>>>=13,U+=H,o[0]=N,o[1]=U,o[2]=q,o[3]=M,o[4]=R,o[5]=D,o[6]=F,o[7]=z,o[8]=K,o[9]=$}finalize(){const{h:e,pad:t}=this,n=new Uint16Array(10);let r=e[1]>>>13;e[1]&=8191;for(let t=2;t<10;t++)e[t]+=r,r=e[t]>>>13,e[t]&=8191;e[0]+=5*r,r=e[0]>>>13,e[0]&=8191,e[1]+=r,r=e[1]>>>13,e[1]&=8191,e[2]+=r,n[0]=e[0]+5,r=n[0]>>>13,n[0]&=8191;for(let t=1;t<10;t++)n[t]=e[t]+r,r=n[t]>>>13,n[t]&=8191;n[9]-=8192;let o=(1^r)-1;for(let e=0;e<10;e++)n[e]&=o;o=~o;for(let t=0;t<10;t++)e[t]=e[t]&o|n[t];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let i=e[0]+t[0];e[0]=65535&i;for(let n=1;n<8;n++)i=(e[n]+t[n]|0)+(i>>>16)|0,e[n]=65535&i}update(e){o.default.exists(this);const{buffer:t,blockLen:n}=this,i=(e=(0,r.toBytes)(e)).length;for(let r=0;r<i;){const o=Math.min(n-this.pos,i-r);if(o!==n)t.set(e.subarray(r,r+o),this.pos),this.pos+=o,r+=o,this.pos===n&&(this.process(t,0,!1),this.pos=0);else for(;n<=i-r;r+=n)this.process(e,r)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){o.default.exists(this),o.default.output(e,this),this.finished=!0;const{buffer:t,h:n}=this;let{pos:r}=this;if(r){for(t[r++]=1;r<16;r++)t[r]=0;this.process(t,0,!0)}this.finalize();let i=0;for(let t=0;t<8;t++)e[i++]=n[t]>>>0,e[i++]=n[t]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}}function a(e){const t=(t,n)=>e(n).update((0,r.toBytes)(t)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t}t.wrapConstructorWithKey=a,t.poly1305=a((e=>new s(e)))},4701:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.salsaBasic=void 0;const r=n(9822),o=n(8225),i=(0,o.utf8ToBytes)("expand 16-byte k"),s=(0,o.utf8ToBytes)("expand 32-byte k"),a=(0,o.u32)(i),c=(0,o.u32)(s),u=e=>!(e.byteOffset%4);t.salsaBasic=e=>{const{core:t,rounds:n,counterRight:i,counterLen:s,allow128bitKeys:l,extendNonceFn:d,blockLen:f}=(0,o.checkOpts)({rounds:20,counterRight:!1,counterLen:8,allow128bitKeys:!0,blockLen:64},e);r.default.number(s),r.default.number(n),r.default.number(f),r.default.bool(i),r.default.bool(l);const h=f/4;if(f%4!=0)throw new Error("Salsa/ChaCha: blockLen must be aligned to 4 bytes");return(e,p,y,b,g=0)=>{if(r.default.bytes(e),r.default.bytes(p),r.default.bytes(y),b||(b=new Uint8Array(y.length)),r.default.bytes(b),r.default.number(g),g<0||g>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");if(b.length<y.length)throw new Error(`Salsa/ChaCha: output (${b.length}) is shorter than data (${y.length})`);const m=[];let v,w;if(32===e.length)v=e,w=c;else{if(16!==e.length||!l)throw new Error(`Salsa/ChaCha: invalid 32-byte key, got length=${e.length}`);v=new Uint8Array(32),v.set(e),v.set(e,16),w=a,m.push(v)}if(d){if(p.length<=16)throw new Error("Salsa/ChaCha: extended nonce must be bigger than 16 bytes");v=d(w,v,p.subarray(0,16),new Uint8Array(32)),m.push(v),p=p.subarray(16)}const _=16-s;if(p.length!==_)throw new Error(`Salsa/ChaCha: nonce must be ${_} or 16 bytes`);if(12!==_){const e=new Uint8Array(12);e.set(p,i?0:12-p.length),m.push(p=e)}const E=new Uint8Array(f),x=(0,o.u32)(E),k=(0,o.u32)(v),B=(0,o.u32)(p),O=u(y)&&(0,o.u32)(y),S=u(b)&&(0,o.u32)(b);m.push(x);const A=y.length;for(let e=0,r=g;e<A;r++){if(t(w,k,B,x,r,n),r>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");const o=Math.min(f,A-e);if(o===f&&S&&O){const t=e/4;if(e%4!=0)throw new Error("Salsa/ChaCha: invalid block position");for(let e=0;e<h;e++)S[t+e]=O[t+e]^x[e];e+=f}else{for(let t=0;t<o;t++)b[e+t]=y[e+t]^E[t];e+=o}}for(let e=0;e<m.length;e++)m[e].fill(0);return b}}},7218:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.xchacha20poly1305=t.chacha20poly1305=t._poly1305_aead=t.chacha12=t.chacha8=t.xchacha20=t.chacha20=t.chacha20orig=t.hchacha=void 0;const r=n(8225),o=n(4876),i=n(4701),s=(e,t)=>e<<t|e>>>32-t;function a(e,t,n,r,o,i=20){let a=e[0],c=e[1],u=e[2],l=e[3],d=t[0],f=t[1],h=t[2],p=t[3],y=t[4],b=t[5],g=t[6],m=t[7],v=o,w=n[0],_=n[1],E=n[2],x=a,k=c,B=u,O=l,S=d,A=f,I=h,T=p,C=y,j=b,L=g,P=m,H=v,N=w,U=_,q=E;for(let e=0;e<i;e+=2)x=x+S|0,H=s(H^x,16),C=C+H|0,S=s(S^C,12),x=x+S|0,H=s(H^x,8),C=C+H|0,S=s(S^C,7),k=k+A|0,N=s(N^k,16),j=j+N|0,A=s(A^j,12),k=k+A|0,N=s(N^k,8),j=j+N|0,A=s(A^j,7),B=B+I|0,U=s(U^B,16),L=L+U|0,I=s(I^L,12),B=B+I|0,U=s(U^B,8),L=L+U|0,I=s(I^L,7),O=O+T|0,q=s(q^O,16),P=P+q|0,T=s(T^P,12),O=O+T|0,q=s(q^O,8),P=P+q|0,T=s(T^P,7),x=x+A|0,q=s(q^x,16),L=L+q|0,A=s(A^L,12),x=x+A|0,q=s(q^x,8),L=L+q|0,A=s(A^L,7),k=k+I|0,H=s(H^k,16),P=P+H|0,I=s(I^P,12),k=k+I|0,H=s(H^k,8),P=P+H|0,I=s(I^P,7),B=B+T|0,N=s(N^B,16),C=C+N|0,T=s(T^C,12),B=B+T|0,N=s(N^B,8),C=C+N|0,T=s(T^C,7),O=O+S|0,U=s(U^O,16),j=j+U|0,S=s(S^j,12),O=O+S|0,U=s(U^O,8),j=j+U|0,S=s(S^j,7);let M=0;r[M++]=a+x|0,r[M++]=c+k|0,r[M++]=u+B|0,r[M++]=l+O|0,r[M++]=d+S|0,r[M++]=f+A|0,r[M++]=h+I|0,r[M++]=p+T|0,r[M++]=y+C|0,r[M++]=b+j|0,r[M++]=g+L|0,r[M++]=m+P|0,r[M++]=v+H|0,r[M++]=w+N|0,r[M++]=_+U|0,r[M++]=E+q|0}function c(e,t,n,o){const i=(0,r.u32)(t),a=(0,r.u32)(n),c=(0,r.u32)(o);let u=e[0],l=e[1],d=e[2],f=e[3],h=i[0],p=i[1],y=i[2],b=i[3],g=i[4],m=i[5],v=i[6],w=i[7],_=a[0],E=a[1],x=a[2],k=a[3];for(let e=0;e<20;e+=2)u=u+h|0,_=s(_^u,16),g=g+_|0,h=s(h^g,12),u=u+h|0,_=s(_^u,8),g=g+_|0,h=s(h^g,7),l=l+p|0,E=s(E^l,16),m=m+E|0,p=s(p^m,12),l=l+p|0,E=s(E^l,8),m=m+E|0,p=s(p^m,7),d=d+y|0,x=s(x^d,16),v=v+x|0,y=s(y^v,12),d=d+y|0,x=s(x^d,8),v=v+x|0,y=s(y^v,7),f=f+b|0,k=s(k^f,16),w=w+k|0,b=s(b^w,12),f=f+b|0,k=s(k^f,8),w=w+k|0,b=s(b^w,7),u=u+p|0,k=s(k^u,16),v=v+k|0,p=s(p^v,12),u=u+p|0,k=s(k^u,8),v=v+k|0,p=s(p^v,7),l=l+y|0,_=s(_^l,16),w=w+_|0,y=s(y^w,12),l=l+y|0,_=s(_^l,8),w=w+_|0,y=s(y^w,7),d=d+b|0,E=s(E^d,16),g=g+E|0,b=s(b^g,12),d=d+b|0,E=s(E^d,8),g=g+E|0,b=s(b^g,7),f=f+h|0,x=s(x^f,16),m=m+x|0,h=s(h^m,12),f=f+h|0,x=s(x^f,8),m=m+x|0,h=s(h^m,7);return c[0]=u,c[1]=l,c[2]=d,c[3]=f,c[4]=_,c[5]=E,c[6]=x,c[7]=k,o}t.hchacha=c,t.chacha20orig=(0,i.salsaBasic)({core:a,counterRight:!1,counterLen:8}),t.chacha20=(0,i.salsaBasic)({core:a,counterRight:!1,counterLen:4,allow128bitKeys:!1}),t.xchacha20=(0,i.salsaBasic)({core:a,counterRight:!1,counterLen:8,extendNonceFn:c,allow128bitKeys:!1}),t.chacha8=(0,i.salsaBasic)({core:a,counterRight:!1,counterLen:4,rounds:8}),t.chacha12=(0,i.salsaBasic)({core:a,counterRight:!1,counterLen:4,rounds:12});const u=new Uint8Array(16),l=(e,t)=>{e.update(t);const n=t.length%16;n&&e.update(u.subarray(n))},d=(e,t,n,i,s)=>{const a=e(t,n,new Uint8Array(32)),c=o.poly1305.create(a);s&&l(c,s),l(c,i);const u=new Uint8Array(16),d=(0,r.createView)(u);(0,r.setBigUint64)(d,0,BigInt(s?s.length:0),!0),(0,r.setBigUint64)(d,8,BigInt(i.length),!0),c.update(u);const f=c.digest();return a.fill(0),f};t._poly1305_aead=e=>(t,n,o)=>((0,r.ensureBytes)(t,32),(0,r.ensureBytes)(n),{tagLength:16,encrypt:(i,s)=>{const a=i.length,c=a+16;s?(0,r.ensureBytes)(s,c):s=new Uint8Array(c),e(t,n,i,s,1);const u=d(e,t,n,s.subarray(0,-16),o);return s.set(u,a),s},decrypt:(i,s)=>{const a=i.length,c=a-16;if(a<16)throw new Error("encrypted data must be at least 16 bytes");s?(0,r.ensureBytes)(s,c):s=new Uint8Array(c);const u=i.subarray(0,-16),l=i.subarray(-16),f=d(e,t,n,u,o);if(!(0,r.equalBytes)(l,f))throw new Error("invalid tag");return e(t,n,u,s,1),s}}),t.chacha20poly1305=(0,t._poly1305_aead)(t.chacha20),t.xchacha20poly1305=(0,t._poly1305_aead)(t.xchacha20)},8225:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setBigUint64=t.Hash=t.equalBytes=t.ensureBytes=t.checkOpts=t.concatBytes=t.toBytes=t.bytesToUtf8=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.isLE=t.createView=t.u32=t.u16=t.u8=void 0;const n=e=>e instanceof Uint8Array;if(t.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),t.u16=e=>new Uint16Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/2)),t.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),t.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),t.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!t.isLE)throw new Error("Non little-endian hardware is not supported");const r=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function o(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}t.bytesToHex=function(e){if(!n(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=r[e[n]];return t},t.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let t=0;t<n.length;t++){const r=2*t,o=e.slice(r,r+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[t]=i}return n},t.nextTick=async()=>{},t.asyncLoop=async function(e,n,r){let o=Date.now();for(let i=0;i<e;i++){r(i);const e=Date.now()-o;e>=0&&e<n||(await(0,t.nextTick)(),o+=e)}},t.utf8ToBytes=o,t.bytesToUtf8=function(e){return(new TextDecoder).decode(e)},t.toBytes=function(e){if("string"==typeof e&&(e=o(e)),!n(e))throw new Error("expected Uint8Array, got "+typeof e);return e},t.concatBytes=function(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let r=0;return e.forEach((e=>{if(!n(e))throw new Error("Uint8Array expected");t.set(e,r),r+=e.length})),t},t.checkOpts=function(e,t){if(void 0!==t&&("object"!=typeof t||(n=t,"[object Object]"!==Object.prototype.toString.call(n)||n.constructor!==Object)))throw new Error("options must be object or undefined");var n;return Object.assign(e,t)},t.ensureBytes=function(e,t){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");if("number"==typeof t&&e.length!==t)throw new Error(`Uint8Array length ${t} expected`)},t.equalBytes=function(e,t){if(e.length!==t.length)throw new Error("equalBytes: Different size of Uint8Arrays");let n=!0;for(let r=0;r<e.length;r++)n&&(n=e[r]===t[r]);return n},t.Hash=class{},t.setBigUint64=function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),a=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,s,r),e.setUint32(t+u,a,r)}},9082:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCurve=t.getHash=void 0;const r=n(9569),o=n(8089),i=n(6551);function s(e){return{hash:e,hmac:(t,...n)=>(0,r.hmac)(e,t,(0,o.concatBytes)(...n)),randomBytes:o.randomBytes}}t.getHash=s,t.createCurve=function(e,t){const n=t=>(0,i.weierstrass)({...e,...s(t)});return Object.freeze({...n(t),create:n})}},1525:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateBasic=t.wNAF=void 0;const r=n(4632),o=n(219),i=BigInt(0),s=BigInt(1);t.wNAF=function(e,t){const n=(e,t)=>{const n=t.negate();return e?n:t},r=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:n,unsafeLadder(t,n){let r=e.ZERO,o=t;for(;n>i;)n&s&&(r=r.add(o)),o=o.double(),n>>=s;return r},precomputeWindow(e,t){const{windows:n,windowSize:o}=r(t),i=[];let s=e,a=s;for(let e=0;e<n;e++){a=s,i.push(a);for(let e=1;e<o;e++)a=a.add(s),i.push(a);s=a.double()}return i},wNAF(t,o,i){const{windows:a,windowSize:c}=r(t);let u=e.ZERO,l=e.BASE;const d=BigInt(2**t-1),f=2**t,h=BigInt(t);for(let e=0;e<a;e++){const t=e*c;let r=Number(i&d);i>>=h,r>c&&(r-=f,i+=s);const a=t,p=t+Math.abs(r)-1,y=e%2!=0,b=r<0;0===r?l=l.add(n(y,o[a])):u=u.add(n(b,o[p]))}return{p:u,f:l}},wNAFCached(e,t,n,r){const o=e._WINDOW_SIZE||1;let i=t.get(e);return i||(i=this.precomputeWindow(e,o),1!==o&&t.set(e,r(i))),this.wNAF(o,i,n)}}},t.validateBasic=function(e){return(0,r.validateField)(e.Fp),(0,o.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,r.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}},5134:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createHasher=t.isogenyMap=t.hash_to_field=t.expand_message_xof=t.expand_message_xmd=void 0;const r=n(4632),o=n(219),i=o.bytesToNumberBE;function s(e,t){if(e<0||e>=1<<8*t)throw new Error(`bad I2OSP call: value=${e} length=${t}`);const n=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)n[r]=255&e,e>>>=8;return new Uint8Array(n)}function a(e,t){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}function c(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected")}function u(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function l(e,t,n,r){c(e),c(t),u(n),t.length>255&&(t=r((0,o.concatBytes)((0,o.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));const{outputLen:i,blockLen:l}=r,d=Math.ceil(n/i);if(d>255)throw new Error("Invalid xmd length");const f=(0,o.concatBytes)(t,s(t.length,1)),h=s(0,l),p=s(n,2),y=new Array(d),b=r((0,o.concatBytes)(h,e,p,s(0,1),f));y[0]=r((0,o.concatBytes)(b,s(1,1),f));for(let e=1;e<=d;e++){const t=[a(b,y[e-1]),s(e+1,1),f];y[e]=r((0,o.concatBytes)(...t))}return(0,o.concatBytes)(...y).slice(0,n)}function d(e,t,n,r,i){if(c(e),c(t),u(n),t.length>255){const e=Math.ceil(2*r/8);t=i.create({dkLen:e}).update((0,o.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(e).update(s(n,2)).update(t).update(s(t.length,1)).digest()}function f(e,t,n){(0,o.validateObject)(n,{DST:"string",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:s,k:a,m:f,hash:h,expand:p,DST:y}=n;c(e),u(t);const b=function(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return(0,o.utf8ToBytes)(e);throw new Error("DST must be Uint8Array or string")}(y),g=s.toString(2).length,m=Math.ceil((g+a)/8),v=t*f*m;let w;if("xmd"===p)w=l(e,b,v,h);else if("xof"===p)w=d(e,b,v,a,h);else{if("_internal_pass"!==p)throw new Error('expand must be "xmd" or "xof"');w=e}const _=new Array(t);for(let e=0;e<t;e++){const t=new Array(f);for(let n=0;n<f;n++){const o=m*(n+e*f),a=w.subarray(o,o+m);t[n]=(0,r.mod)(i(a),s)}_[e]=t}return _}t.expand_message_xmd=l,t.expand_message_xof=d,t.hash_to_field=f,t.isogenyMap=function(e,t){const n=t.map((e=>Array.from(e).reverse()));return(t,r)=>{const[o,i,s,a]=n.map((n=>n.reduce(((n,r)=>e.add(e.mul(n,t),r)))));return t=e.div(o,i),r=e.mul(r,e.div(s,a)),{x:t,y:r}}},t.createHasher=function(e,t,n){if("function"!=typeof t)throw new Error("mapToCurve() must be defined");return{hashToCurve(r,o){const i=f(r,2,{...n,DST:n.DST,...o}),s=e.fromAffine(t(i[0])),a=e.fromAffine(t(i[1])),c=s.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,o){const i=f(r,1,{...n,DST:n.encodeDST,...o}),s=e.fromAffine(t(i[0])).clearCofactor();return s.assertValidity(),s}}}},4632:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hashToPrivateScalar=t.FpSqrtEven=t.FpSqrtOdd=t.Field=t.nLength=t.FpIsSquare=t.FpDiv=t.FpInvertBatch=t.FpPow=t.validateField=t.isNegativeLE=t.FpSqrt=t.tonelliShanks=t.invert=t.pow2=t.pow=t.mod=void 0;const r=n(219),o=BigInt(0),i=BigInt(1),s=BigInt(2),a=BigInt(3),c=BigInt(4),u=BigInt(5),l=BigInt(8);function d(e,t){const n=e%t;return n>=o?n:t+n}function f(e,t,n){if(n<=o||t<o)throw new Error("Expected power/modulo > 0");if(n===i)return o;let r=i;for(;t>o;)t&i&&(r=r*e%n),e=e*e%n,t>>=i;return r}function h(e,t){if(e===o||t<=o)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=d(e,t),r=t,s=o,a=i,c=i,u=o;for(;n!==o;){const e=r/n,t=r%n,o=s-c*e,i=a-u*e;r=n,n=t,s=c,a=u,c=o,u=i}if(r!==i)throw new Error("invert: does not exist");return d(s,t)}function p(e){const t=(e-i)/s;let n,r,a;for(n=e-i,r=0;n%s===o;n/=s,r++);for(a=s;a<e&&f(a,t,e)!==e-i;a++);if(1===r){const t=(e+i)/c;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const u=(n+i)/s;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let s=r,c=e.pow(e.mul(e.ONE,a),n),l=e.pow(o,u),d=e.pow(o,n);for(;!e.eql(d,e.ONE);){if(e.eql(d,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(d);t<s&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const n=e.pow(c,i<<BigInt(s-t-1));c=e.sqr(n),l=e.mul(l,n),d=e.mul(d,c),s=t}return l}}function y(e){if(e%c===a){const t=(e+i)/c;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%l===u){const t=(e-u)/l;return function(e,n){const r=e.mul(n,s),o=e.pow(r,t),i=e.mul(n,o),a=e.mul(e.mul(i,s),o),c=e.mul(i,e.sub(a,e.ONE));if(!e.eql(e.sqr(c),n))throw new Error("Cannot find square root");return c}}return p(e)}BigInt(9),BigInt(16),t.mod=d,t.pow=f,t.pow2=function(e,t,n){let r=e;for(;t-- >o;)r*=r,r%=n;return r},t.invert=h,t.tonelliShanks=p,t.FpSqrt=y,t.isNegativeLE=(e,t)=>(d(e,t)&i)===i;const b=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function g(e,t,n){if(n<o)throw new Error("Expected power > 0");if(n===o)return e.ONE;if(n===i)return t;let r=e.ONE,s=t;for(;n>o;)n&i&&(r=e.mul(r,s)),s=e.sqr(s),n>>=i;return r}function m(e,t){const n=new Array(t.length),r=t.reduce(((t,r,o)=>e.is0(r)?t:(n[o]=t,e.mul(t,r))),e.ONE),o=e.inv(r);return t.reduceRight(((t,r,o)=>e.is0(r)?t:(n[o]=e.mul(t,n[o]),e.mul(t,r))),o),n}function v(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}t.validateField=function(e){const t=b.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,r.validateObject)(e,t)},t.FpPow=g,t.FpInvertBatch=m,t.FpDiv=function(e,t,n){return e.mul(t,"bigint"==typeof n?h(n,e.ORDER):e.inv(n))},t.FpIsSquare=function(e){const t=(e.ORDER-i)/s;return n=>{const r=e.pow(n,t);return e.eql(r,e.ZERO)||e.eql(r,e.ONE)}},t.nLength=v,t.Field=function(e,t,n=!1,s={}){if(e<=o)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:a,nByteLength:c}=v(e,t);if(c>2048)throw new Error("Field lengths over 2048 bytes are not supported");const u=y(e),l=Object.freeze({ORDER:e,BITS:a,BYTES:c,MASK:(0,r.bitMask)(a),ZERO:o,ONE:i,create:t=>d(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return o<=t&&t<e},is0:e=>e===o,isOdd:e=>(e&i)===i,neg:t=>d(-t,e),eql:(e,t)=>e===t,sqr:t=>d(t*t,e),add:(t,n)=>d(t+n,e),sub:(t,n)=>d(t-n,e),mul:(t,n)=>d(t*n,e),pow:(e,t)=>g(l,e,t),div:(t,n)=>d(t*h(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>h(t,e),sqrt:s.sqrt||(e=>u(l,e)),invertBatch:e=>m(l,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?(0,r.numberToBytesLE)(e,c):(0,r.numberToBytesBE)(e,c),fromBytes:e=>{if(e.length!==c)throw new Error(`Fp.fromBytes: expected ${c}, got ${e.length}`);return n?(0,r.bytesToNumberLE)(e):(0,r.bytesToNumberBE)(e)}});return Object.freeze(l)},t.FpSqrtOdd=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const n=e.sqrt(t);return e.isOdd(n)?n:e.neg(n)},t.FpSqrtEven=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const n=e.sqrt(t);return e.isOdd(n)?e.neg(n):n},t.hashToPrivateScalar=function(e,t,n=!1){const o=(e=(0,r.ensureBytes)("privateHash",e)).length,s=v(t).nByteLength+8;if(s<24||o<s||o>1024)throw new Error(`hashToPrivateScalar: expected ${s}-1024 bytes of input, got ${o}`);return d(n?(0,r.bytesToNumberLE)(e):(0,r.bytesToNumberBE)(e),t-i)+i}},219:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateObject=t.createHmacDrbg=t.bitMask=t.bitSet=t.bitGet=t.bitLen=t.utf8ToBytes=t.equalBytes=t.concatBytes=t.ensureBytes=t.numberToVarBytesBE=t.numberToBytesLE=t.numberToBytesBE=t.bytesToNumberLE=t.bytesToNumberBE=t.hexToBytes=t.hexToNumber=t.numberToHexUnpadded=t.bytesToHex=void 0;const n=BigInt(0),r=BigInt(1),o=BigInt(2),i=e=>e instanceof Uint8Array,s=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function a(e){if(!i(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=s[e[n]];return t}function c(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function u(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function l(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let t=0;t<n.length;t++){const r=2*t,o=e.slice(r,r+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[t]=i}return n}function d(e,t){return l(e.toString(16).padStart(2*t,"0"))}function f(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;return e.forEach((e=>{if(!i(e))throw new Error("Uint8Array expected");t.set(e,n),n+=e.length})),t}t.bytesToHex=a,t.numberToHexUnpadded=c,t.hexToNumber=u,t.hexToBytes=l,t.bytesToNumberBE=function(e){return u(a(e))},t.bytesToNumberLE=function(e){if(!i(e))throw new Error("Uint8Array expected");return u(a(Uint8Array.from(e).reverse()))},t.numberToBytesBE=d,t.numberToBytesLE=function(e,t){return d(e,t).reverse()},t.numberToVarBytesBE=function(e){return l(c(e))},t.ensureBytes=function(e,t,n){let r;if("string"==typeof t)try{r=l(t)}catch(n){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${n}`)}else{if(!i(t))throw new Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(t)}const o=r.length;if("number"==typeof n&&o!==n)throw new Error(`${e} expected ${n} bytes, got ${o}`);return r},t.concatBytes=f,t.equalBytes=function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},t.utf8ToBytes=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))},t.bitLen=function(e){let t;for(t=0;e>n;e>>=r,t+=1);return t},t.bitGet=function(e,t){return e>>BigInt(t)&r},t.bitSet=(e,t,o)=>e|(o?r:n)<<BigInt(t),t.bitMask=e=>(o<<BigInt(e-1))-r;const h=e=>new Uint8Array(e),p=e=>Uint8Array.from(e);t.createHmacDrbg=function(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=h(e),o=h(e),i=0;const s=()=>{r.fill(1),o.fill(0),i=0},a=(...e)=>n(o,r,...e),c=(e=h())=>{o=a(p([0]),e),r=a(),0!==e.length&&(o=a(p([1]),e),r=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=a();const t=r.slice();n.push(t),e+=r.length}return f(...n)};return(e,t)=>{let n;for(s(),c(e);!(n=t(u()));)c();return s(),n}};const y={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};t.validateObject=function(e,t,n={}){const r=(t,n,r)=>{const o=y[n];if("function"!=typeof o)throw new Error(`Invalid validator "${n}", expected function`);const i=e[t];if(!(r&&void 0===i||o(i,e)))throw new Error(`Invalid param ${String(t)}=${i} (${typeof i}), expected ${n}`)};for(const[e,n]of Object.entries(t))r(e,n,!1);for(const[e,t]of Object.entries(n))r(e,t,!0);return e}},6551:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapToCurveSimpleSWU=t.SWUFpSqrtRatio=t.weierstrass=t.weierstrassPoints=t.DER=void 0;const r=n(4632),o=n(219),i=n(219),s=n(1525),{bytesToNumberBE:a,hexToBytes:c}=o;t.DER={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:n}=t.DER;if(e.length<2||2!==e[0])throw new n("Invalid signature integer tag");const r=e[1],o=e.subarray(2,r+2);if(!r||o.length!==r)throw new n("Invalid signature integer: wrong length");if(128&o[0])throw new n("Invalid signature integer: negative");if(0===o[0]&&!(128&o[1]))throw new n("Invalid signature integer: unnecessary leading zero");return{d:a(o),l:e.subarray(r+2)}},toSig(e){const{Err:n}=t.DER,r="string"==typeof e?c(e):e;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let o=r.length;if(o<2||48!=r[0])throw new n("Invalid signature tag");if(r[1]!==o-2)throw new n("Invalid signature: incorrect length");const{d:i,l:s}=t.DER._parseInt(r.subarray(2)),{d:a,l:u}=t.DER._parseInt(s);if(u.length)throw new n("Invalid signature: left bytes after parsing");return{r:i,s:a}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,n=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},r=t(n(e.s)),o=t(n(e.r)),i=r.length/2,s=o.length/2,a=n(i),c=n(s);return`30${n(s+i+4)}02${c}${o}02${a}${r}`}};const u=BigInt(0),l=BigInt(1),d=BigInt(2),f=BigInt(3),h=BigInt(4);function p(e){const t=function(e){const t=(0,s.validateBasic)(e);o.validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,a=t.toBytes||((e,t,r)=>{const i=t.toAffine();return o.concatBytes(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),c=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function d(e){const{a:r,b:o}=t,i=n.sqr(e),s=n.mul(i,e);return n.add(n.add(s,n.mul(e,r)),o)}if(!n.eql(n.sqr(t.Gy),d(t.Gx)))throw new Error("bad generator point: equation left != right");function h(e){return"bigint"==typeof e&&u<e&&e<t.n}function p(e){if(!h(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function y(e){const{allowedPrivateKeyLengths:n,nByteLength:s,wrapPrivateKey:a,n:c}=t;if(n&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=o.bytesToHex(e)),"string"!=typeof e||!n.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*s,"0")}let u;try{u="bigint"==typeof e?e:o.bytesToNumberBE((0,i.ensureBytes)("private key",e,s))}catch(t){throw new Error(`private key must be ${s} bytes, hex or bigint, not ${typeof e}`)}return a&&(u=r.mod(u,c)),p(u),u}const b=new Map;function g(e){if(!(e instanceof m))throw new Error("ProjectivePoint expected")}class m{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required")}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof m)throw new Error("projective point not allowed");const o=e=>n.eql(e,n.ZERO);return o(t)&&o(r)?m.ZERO:new m(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(m.fromAffine)}static fromHex(e){const t=m.fromAffine(c((0,i.ensureBytes)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return m.BASE.multiply(y(e))}_setWindowSize(e){this._WINDOW_SIZE=e,b.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:e,y:r}=this.toAffine();if(!n.isValid(e)||!n.isValid(r))throw new Error("bad point: x or y not FE");const o=n.sqr(r),i=d(e);if(!n.eql(o,i))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){g(e);const{px:t,py:r,pz:o}=this,{px:i,py:s,pz:a}=e,c=n.eql(n.mul(t,a),n.mul(i,o)),u=n.eql(n.mul(r,a),n.mul(s,o));return c&&u}negate(){return new m(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,o=n.mul(r,f),{px:i,py:s,pz:a}=this;let c=n.ZERO,u=n.ZERO,l=n.ZERO,d=n.mul(i,i),h=n.mul(s,s),p=n.mul(a,a),y=n.mul(i,s);return y=n.add(y,y),l=n.mul(i,a),l=n.add(l,l),c=n.mul(e,l),u=n.mul(o,p),u=n.add(c,u),c=n.sub(h,u),u=n.add(h,u),u=n.mul(c,u),c=n.mul(y,c),l=n.mul(o,l),p=n.mul(e,p),y=n.sub(d,p),y=n.mul(e,y),y=n.add(y,l),l=n.add(d,d),d=n.add(l,d),d=n.add(d,p),d=n.mul(d,y),u=n.add(u,d),p=n.mul(s,a),p=n.add(p,p),d=n.mul(p,y),c=n.sub(c,d),l=n.mul(p,h),l=n.add(l,l),l=n.add(l,l),new m(c,u,l)}add(e){g(e);const{px:r,py:o,pz:i}=this,{px:s,py:a,pz:c}=e;let u=n.ZERO,l=n.ZERO,d=n.ZERO;const h=t.a,p=n.mul(t.b,f);let y=n.mul(r,s),b=n.mul(o,a),v=n.mul(i,c),w=n.add(r,o),_=n.add(s,a);w=n.mul(w,_),_=n.add(y,b),w=n.sub(w,_),_=n.add(r,i);let E=n.add(s,c);return _=n.mul(_,E),E=n.add(y,v),_=n.sub(_,E),E=n.add(o,i),u=n.add(a,c),E=n.mul(E,u),u=n.add(b,v),E=n.sub(E,u),d=n.mul(h,_),u=n.mul(p,v),d=n.add(u,d),u=n.sub(b,d),d=n.add(b,d),l=n.mul(u,d),b=n.add(y,y),b=n.add(b,y),v=n.mul(h,v),_=n.mul(p,_),b=n.add(b,v),v=n.sub(y,v),v=n.mul(h,v),_=n.add(_,v),y=n.mul(b,_),l=n.add(l,y),y=n.mul(E,_),u=n.mul(w,u),u=n.sub(u,y),y=n.mul(w,b),d=n.mul(E,d),d=n.add(d,y),new m(u,l,d)}subtract(e){return this.add(e.negate())}is0(){return this.equals(m.ZERO)}wNAF(e){return w.wNAFCached(this,b,e,(e=>{const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(m.fromAffine)}))}multiplyUnsafe(e){const r=m.ZERO;if(e===u)return r;if(p(e),e===l)return this;const{endo:o}=t;if(!o)return w.unsafeLadder(this,e);let{k1neg:i,k1:s,k2neg:a,k2:c}=o.splitScalar(e),d=r,f=r,h=this;for(;s>u||c>u;)s&l&&(d=d.add(h)),c&l&&(f=f.add(h)),h=h.double(),s>>=l,c>>=l;return i&&(d=d.negate()),a&&(f=f.negate()),f=new m(n.mul(f.px,o.beta),f.py,f.pz),d.add(f)}multiply(e){p(e);let r,o,i=e;const{endo:s}=t;if(s){const{k1neg:e,k1:t,k2neg:a,k2:c}=s.splitScalar(i);let{p:u,f:l}=this.wNAF(t),{p:d,f}=this.wNAF(c);u=w.constTimeNegate(e,u),d=w.constTimeNegate(a,d),d=new m(n.mul(d.px,s.beta),d.py,d.pz),r=u.add(d),o=l.add(f)}else{const{p:e,f:t}=this.wNAF(i);r=e,o=t}return m.normalizeZ([r,o])[0]}multiplyAndAddUnsafe(e,t,n){const r=m.BASE,o=(e,t)=>t!==u&&t!==l&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),i=o(this,t).add(o(e,n));return i.is0()?void 0:i}toAffine(e){const{px:t,py:r,pz:o}=this,i=this.is0();null==e&&(e=i?n.ONE:n.inv(o));const s=n.mul(t,e),a=n.mul(r,e),c=n.mul(o,e);if(i)return{x:n.ZERO,y:n.ZERO};if(!n.eql(c,n.ONE))throw new Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===l)return!0;if(n)return n(m,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===l?this:n?n(m,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),a(m,this,e)}toHex(e=!0){return o.bytesToHex(this.toRawBytes(e))}}m.BASE=new m(t.Gx,t.Gy,n.ONE),m.ZERO=new m(n.ZERO,n.ONE,n.ZERO);const v=t.nBitLength,w=(0,s.wNAF)(m,t.endo?Math.ceil(v/2):v);return{CURVE:t,ProjectivePoint:m,normPrivateKeyToScalar:y,weierstrassEquation:d,isWithinCurveOrder:h}}function y(e,t){const n=e.ORDER;let r=u;for(let e=n-l;e%d===u;e/=d)r+=l;const o=r,i=d<<o-l-l,s=i*d,a=(n-l)/s,c=(a-l)/d,p=s-l,y=i,b=e.pow(t,a),g=e.pow(t,(a+l)/d);let m=(t,n)=>{let r=b,i=e.pow(n,p),s=e.sqr(i);s=e.mul(s,n);let a=e.mul(t,s);a=e.pow(a,c),a=e.mul(a,i),i=e.mul(a,n),s=e.mul(a,t);let u=e.mul(s,i);a=e.pow(u,y);let f=e.eql(a,e.ONE);i=e.mul(s,g),a=e.mul(u,r),s=e.cmov(i,s,f),u=e.cmov(a,u,f);for(let t=o;t>l;t--){let n=t-d;n=d<<n-l;let o=e.pow(u,n);const a=e.eql(o,e.ONE);i=e.mul(s,r),r=e.mul(r,r),o=e.mul(u,r),s=e.cmov(i,s,a),u=e.cmov(o,u,a)}return{isValid:f,value:s}};if(e.ORDER%h===f){const n=(e.ORDER-f)/h,r=e.sqrt(e.neg(t));m=(t,o)=>{let i=e.sqr(o);const s=e.mul(t,o);i=e.mul(i,s);let a=e.pow(i,n);a=e.mul(a,s);const c=e.mul(a,r),u=e.mul(e.sqr(a),o),l=e.eql(u,t);return{isValid:l,value:e.cmov(c,a,l)}}}return m}t.weierstrassPoints=p,t.weierstrass=function(e){const n=function(e){const t=(0,s.validateBasic)(e);return o.validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:a,n:c}=n,d=a.BYTES+1,f=2*a.BYTES+1;function h(e){return r.mod(e,c)}function y(e){return r.invert(e,c)}const{ProjectivePoint:b,normPrivateKeyToScalar:g,weierstrassEquation:m,isWithinCurveOrder:v}=p({...n,toBytes(e,t,n){const r=t.toAffine(),i=a.toBytes(r.x),s=o.concatBytes;return n?s(Uint8Array.from([t.hasEvenY()?2:3]),i):s(Uint8Array.from([4]),i,a.toBytes(r.y))},fromBytes(e){const t=e.length,n=e[0],r=e.subarray(1);if(t!==d||2!==n&&3!==n){if(t===f&&4===n)return{x:a.fromBytes(r.subarray(0,a.BYTES)),y:a.fromBytes(r.subarray(a.BYTES,2*a.BYTES))};throw new Error(`Point of length ${t} was invalid. Expected ${d} compressed bytes or ${f} uncompressed bytes`)}{const e=o.bytesToNumberBE(r);if(!(u<(i=e)&&i<a.ORDER))throw new Error("Point is not on curve");const t=m(e);let s=a.sqrt(t);return 1==(1&n)!=((s&l)===l)&&(s=a.neg(s)),{x:e,y:s}}var i}}),w=e=>o.bytesToHex(o.numberToBytesBE(e,n.nByteLength));function _(e){return e>c>>l}const E=(e,t,n)=>o.bytesToNumberBE(e.slice(t,n));class x{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const t=n.nByteLength;return e=(0,i.ensureBytes)("compactSignature",e,2*t),new x(E(e,0,t),E(e,t,2*t))}static fromDER(e){const{r:n,s:r}=t.DER.toSig((0,i.ensureBytes)("DER",e));return new x(n,r)}assertValidity(){if(!v(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!v(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new x(this.r,this.s,e)}recoverPublicKey(e){const{r:t,s:r,recovery:o}=this,s=S((0,i.ensureBytes)("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const c=2===o||3===o?t+n.n:t;if(c>=a.ORDER)throw new Error("recovery id 2 or 3 invalid");const u=0==(1&o)?"02":"03",l=b.fromHex(u+w(c)),d=y(c),f=h(-s*d),p=h(r*d),g=b.BASE.multiplyAndAddUnsafe(l,f,p);if(!g)throw new Error("point at infinify");return g.assertValidity(),g}hasHighS(){return _(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,h(-this.s),this.recovery):this}toDERRawBytes(){return o.hexToBytes(this.toDERHex())}toDERHex(){return t.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return o.hexToBytes(this.toCompactHex())}toCompactHex(){return w(this.r)+w(this.s)}}const k={isValidPrivateKey(e){try{return g(e),!0}catch(e){return!1}},normPrivateKeyToScalar:g,randomPrivateKey:()=>{const e=n.randomBytes(a.BYTES+8),t=r.hashToPrivateScalar(e,c);return o.numberToBytesBE(t,n.nByteLength)},precompute:(e=8,t=b.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function B(e){const t=e instanceof Uint8Array,n="string"==typeof e,r=(t||n)&&e.length;return t?r===d||r===f:n?r===2*d||r===2*f:e instanceof b}const O=n.bits2int||function(e){const t=o.bytesToNumberBE(e),r=8*e.length-n.nBitLength;return r>0?t>>BigInt(r):t},S=n.bits2int_modN||function(e){return h(O(e))},A=o.bitMask(n.nBitLength);function I(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(u<=e&&e<A))throw new Error(`bigint expected < 2^${n.nBitLength}`);return o.numberToBytesBE(e,n.nByteLength)}const T={lowS:n.lowS,prehash:!1},C={lowS:n.lowS,prehash:!1};return b.BASE._setWindowSize(8),{CURVE:n,getPublicKey:function(e,t=!0){return b.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(B(e))throw new Error("first arg must be private key");if(!B(t))throw new Error("second arg must be public key");return b.fromHex(t).multiply(g(e)).toRawBytes(n)},sign:function(e,t,r=T){const{seed:s,k2sig:c}=function(e,t,r=T){if(["recovered","canonical"].some((e=>e in r)))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:c}=n;let{lowS:d,prehash:f,extraEntropy:p}=r;null==d&&(d=!0),e=(0,i.ensureBytes)("msgHash",e),f&&(e=(0,i.ensureBytes)("prehashed msgHash",s(e)));const m=S(e),w=g(t),E=[I(w),I(m)];if(null!=p){const e=!0===p?c(a.BYTES):p;E.push((0,i.ensureBytes)("extraEntropy",e,a.BYTES))}const k=o.concatBytes(...E),B=m;return{seed:k,k2sig:function(e){const t=O(e);if(!v(t))return;const n=y(t),r=b.BASE.multiply(t).toAffine(),o=h(r.x);if(o===u)return;const i=h(n*h(B+o*w));if(i===u)return;let s=(r.x===o?0:2)|Number(r.y&l),a=i;return d&&_(i)&&(a=function(e){return _(e)?h(-e):e}(i),s^=1),new x(o,a,s)}}}(e,t,r),d=n;return o.createHmacDrbg(d.hash.outputLen,d.nByteLength,d.hmac)(s,c)},verify:function(e,r,o,s=C){const a=e;if(r=(0,i.ensureBytes)("msgHash",r),o=(0,i.ensureBytes)("publicKey",o),"strict"in s)throw new Error("options.strict was renamed to lowS");const{lowS:c,prehash:u}=s;let l,d;try{if("string"==typeof a||a instanceof Uint8Array)try{l=x.fromDER(a)}catch(e){if(!(e instanceof t.DER.Err))throw e;l=x.fromCompact(a)}else{if("object"!=typeof a||"bigint"!=typeof a.r||"bigint"!=typeof a.s)throw new Error("PARSE");{const{r:e,s:t}=a;l=new x(e,t)}}d=b.fromHex(o)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&l.hasHighS())return!1;u&&(r=n.hash(r));const{r:f,s:p}=l,g=S(r),m=y(p),v=h(g*m),w=h(f*m),_=b.BASE.multiplyAndAddUnsafe(d,v,w)?.toAffine();return!!_&&h(_.x)===f},ProjectivePoint:b,Signature:x,utils:k}},t.SWUFpSqrtRatio=y,t.mapToCurveSimpleSWU=function(e,t){if(r.validateField(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=y(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let o,i,s,a,c,u,l,d;o=e.sqr(r),o=e.mul(o,t.Z),i=e.sqr(o),i=e.add(i,o),s=e.add(i,e.ONE),s=e.mul(s,t.B),a=e.cmov(t.Z,e.neg(i),!e.eql(i,e.ZERO)),a=e.mul(a,t.A),i=e.sqr(s),u=e.sqr(a),c=e.mul(u,t.A),i=e.add(i,c),i=e.mul(i,s),u=e.mul(u,a),c=e.mul(u,t.B),i=e.add(i,c),l=e.mul(o,s);const{isValid:f,value:h}=n(i,u);d=e.mul(o,r),d=e.mul(d,h),l=e.cmov(l,s,f),d=e.cmov(d,h,f);const p=e.isOdd(r)===e.isOdd(d);return d=e.cmov(e.neg(d),d,p),l=e.div(l,a),{x:l,y:d}}}},3497:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeToCurve=t.hashToCurve=t.schnorr=t.secp256k1=void 0;const r=n(3061),o=n(8089),i=n(4632),s=n(6551),a=n(219),c=n(5134),u=n(9082),l=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),d=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),f=BigInt(1),h=BigInt(2),p=(e,t)=>(e+t/h)/t;function y(e){const t=l,n=BigInt(3),r=BigInt(6),o=BigInt(11),s=BigInt(22),a=BigInt(23),c=BigInt(44),u=BigInt(88),d=e*e*e%t,f=d*d*e%t,p=(0,i.pow2)(f,n,t)*f%t,y=(0,i.pow2)(p,n,t)*f%t,g=(0,i.pow2)(y,h,t)*d%t,m=(0,i.pow2)(g,o,t)*g%t,v=(0,i.pow2)(m,s,t)*m%t,w=(0,i.pow2)(v,c,t)*v%t,_=(0,i.pow2)(w,u,t)*w%t,E=(0,i.pow2)(_,c,t)*v%t,x=(0,i.pow2)(E,n,t)*f%t,k=(0,i.pow2)(x,a,t)*m%t,B=(0,i.pow2)(k,r,t)*d%t,O=(0,i.pow2)(B,h,t);if(!b.eql(b.sqr(O),e))throw new Error("Cannot find square root");return O}const b=(0,i.Field)(l,void 0,void 0,{sqrt:y});t.secp256k1=(0,u.createCurve)({a:BigInt(0),b:BigInt(7),Fp:b,n:d,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=d,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-f*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,a=BigInt("0x100000000000000000000000000000000"),c=p(s*e,t),u=p(-r*e,t);let l=(0,i.mod)(e-c*n-u*o,t),h=(0,i.mod)(-c*r-u*s,t);const y=l>a,b=h>a;if(y&&(l=t-l),b&&(h=t-h),l>a||h>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:y,k1:l,k2neg:b,k2:h}}}},r.sha256);const g=BigInt(0),m=e=>"bigint"==typeof e&&g<e&&e<l,v=e=>"bigint"==typeof e&&g<e&&e<d,w={};function _(e,...t){let n=w[e];if(void 0===n){const t=(0,r.sha256)(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=(0,a.concatBytes)(t,t),w[e]=n}return(0,r.sha256)((0,a.concatBytes)(n,...t))}const E=e=>e.toRawBytes(!0).slice(1),x=e=>(0,a.numberToBytesBE)(e,32),k=e=>(0,i.mod)(e,l),B=e=>(0,i.mod)(e,d),O=t.secp256k1.ProjectivePoint,S=(e,t,n)=>O.BASE.multiplyAndAddUnsafe(e,t,n);function A(e){let n=t.secp256k1.utils.normPrivateKeyToScalar(e),r=O.fromPrivateKey(n);return{scalar:r.hasEvenY()?n:B(-n),bytes:E(r)}}function I(e){if(!m(e))throw new Error("bad x: need 0 < x < p");const t=k(e*e);let n=y(k(t*e+BigInt(7)));n%h!==g&&(n=k(-n));const r=new O(e,n,f);return r.assertValidity(),r}function T(...e){return B((0,a.bytesToNumberBE)(_("BIP0340/challenge",...e)))}function C(e,t,n){const r=(0,a.ensureBytes)("signature",e,64),o=(0,a.ensureBytes)("message",t),i=(0,a.ensureBytes)("publicKey",n,32);try{const e=I((0,a.bytesToNumberBE)(i)),t=(0,a.bytesToNumberBE)(r.subarray(0,32));if(!m(t))return!1;const n=(0,a.bytesToNumberBE)(r.subarray(32,64));if(!v(n))return!1;const s=T(x(t),E(e),o),c=S(e,n,B(-s));return!(!c||!c.hasEvenY()||c.toAffine().x!==t)}catch(e){return!1}}t.schnorr={getPublicKey:function(e){return A(e).bytes},sign:function(e,t,n=(0,o.randomBytes)(32)){const r=(0,a.ensureBytes)("message",e),{bytes:i,scalar:s}=A(t),c=(0,a.ensureBytes)("auxRand",n,32),u=x(s^(0,a.bytesToNumberBE)(_("BIP0340/aux",c))),l=_("BIP0340/nonce",u,i,r),d=B((0,a.bytesToNumberBE)(l));if(d===g)throw new Error("sign failed: k is zero");const{bytes:f,scalar:h}=A(d),p=T(f,i,r),y=new Uint8Array(64);if(y.set(f,0),y.set(x(B(h+p*s)),32),!C(y,r,i))throw new Error("sign: Invalid signature produced");return y},verify:C,utils:{randomPrivateKey:t.secp256k1.utils.randomPrivateKey,lift_x:I,pointToBytes:E,numberToBytesBE:a.numberToBytesBE,bytesToNumberBE:a.bytesToNumberBE,taggedHash:_,mod:i.mod}};const j=(()=>(0,c.isogenyMap)(b,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map((e=>e.map((e=>BigInt(e)))))))(),L=(()=>(0,s.mapToCurveSimpleSWU)(b,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:b.create(BigInt("-11"))}))(),P=(()=>(0,c.createHasher)(t.secp256k1.ProjectivePoint,(e=>{const{x:t,y:n}=L(b.create(e[0]));return j(t,n)}),{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:b.ORDER,m:1,k:128,expand:"xmd",hash:r.sha256}))();t.hashToCurve=P.hashToCurve,t.encodeToCurve=P.encodeToCurve},7320:(e,t)=>{"use strict";function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function r(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function o(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function i(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function s(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function a(e,t){o(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(t,"__esModule",{value:!0}),t.output=t.exists=t.hash=t.bytes=t.bool=t.number=void 0,t.number=n,t.bool=r,t.bytes=o,t.hash=i,t.exists=s,t.output=a;const c={number:n,bool:r,bytes:o,hash:i,exists:s,output:a};t.default=c},7505:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHA2=void 0;const r=n(7320),o=n(8089);class i extends o.Hash{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,o.createView)(this.buffer)}update(e){r.default.exists(this);const{view:t,buffer:n,blockLen:i}=this,s=(e=(0,o.toBytes)(e)).length;for(let r=0;r<s;){const a=Math.min(i-this.pos,s-r);if(a!==i)n.set(e.subarray(r,r+a),this.pos),this.pos+=a,r+=a,this.pos===i&&(this.process(t,0),this.pos=0);else{const t=(0,o.createView)(e);for(;i<=s-r;r+=i)this.process(t,r)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){r.default.exists(this),r.default.output(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(n,0),a=0);for(let e=a;e<i;e++)t[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),a=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,s,r),e.setUint32(t+u,a,r)}(n,i-8,BigInt(8*this.length),s),this.process(n,0);const c=(0,o.createView)(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)c.setUint32(4*e,d[e],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:o,destroyed:i,pos:s}=this;return e.length=r,e.pos=s,e.finished=o,e.destroyed=i,r%t&&e.buffer.set(n),e}}t.SHA2=i},6873:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.add=t.toBig=t.split=t.fromBig=void 0;const n=BigInt(2**32-1),r=BigInt(32);function o(e,t=!1){return t?{h:Number(e&n),l:Number(e>>r&n)}:{h:0|Number(e>>r&n),l:0|Number(e&n)}}function i(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:a}=o(e[i],t);[n[i],r[i]]=[s,a]}return[n,r]}function s(e,t,n,r){const o=(t>>>0)+(r>>>0);return{h:e+n+(o/2**32|0)|0,l:0|o}}t.fromBig=o,t.split=i,t.toBig=(e,t)=>BigInt(e>>>0)<<r|BigInt(t>>>0),t.add=s;const a={fromBig:o,split:i,toBig:t.toBig,shrSH:(e,t,n)=>e>>>n,shrSL:(e,t,n)=>e<<32-n|t>>>n,rotrSH:(e,t,n)=>e>>>n|t<<32-n,rotrSL:(e,t,n)=>e<<32-n|t>>>n,rotrBH:(e,t,n)=>e<<64-n|t>>>n-32,rotrBL:(e,t,n)=>e>>>n-32|t<<64-n,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,n)=>e<<n|t>>>32-n,rotlSL:(e,t,n)=>t<<n|e>>>32-n,rotlBH:(e,t,n)=>t<<n-32|e>>>64-n,rotlBL:(e,t,n)=>e<<n-32|t>>>64-n,add:s,add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,r)=>t+n+r+(e/2**32|0)|0,add4L:(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),add4H:(e,t,n,r,o)=>t+n+r+o+(e/2**32|0)|0,add5H:(e,t,n,r,o,i)=>t+n+r+o+i+(e/2**32|0)|0,add5L:(e,t,n,r,o)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(o>>>0)};t.default=a},1945:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=void 0,t.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},4330:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hkdf=t.expand=t.extract=void 0;const r=n(7320),o=n(8089),i=n(9569);function s(e,t,n){return r.default.hash(e),void 0===n&&(n=new Uint8Array(e.outputLen)),(0,i.hmac)(e,(0,o.toBytes)(n),(0,o.toBytes)(t))}t.extract=s;const a=new Uint8Array([0]),c=new Uint8Array;function u(e,t,n,o=32){if(r.default.hash(e),r.default.number(o),o>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(o/e.outputLen);void 0===n&&(n=c);const u=new Uint8Array(s*e.outputLen),l=i.hmac.create(e,t),d=l._cloneInto(),f=new Uint8Array(l.outputLen);for(let t=0;t<s;t++)a[0]=t+1,d.update(0===t?c:f).update(n).update(a).digestInto(f),u.set(f,e.outputLen*t),l._cloneInto(d);return l.destroy(),d.destroy(),f.fill(0),a.fill(0),u.slice(0,o)}t.expand=u,t.hkdf=(e,t,n,r,o)=>u(e,s(e,t,n),r,o)},9569:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;const r=n(7320),o=n(8089);class i extends o.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,r.default.hash(e);const n=(0,o.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),s.fill(0)}update(e){return r.default.exists(this),this.iHash.update(e),this}digestInto(e){r.default.exists(this),r.default.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:o,blockLen:i,outputLen:s}=this;return e.finished=r,e.destroyed=o,e.blockLen=i,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=i,t.hmac=(e,t,n)=>new i(e,t).update(n).digest(),t.hmac.create=(e,t)=>new i(e,t)},9023:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pbkdf2Async=t.pbkdf2=void 0;const r=n(7320),o=n(9569),i=n(8089);function s(e,t,n,s){r.default.hash(e);const a=(0,i.checkOpts)({dkLen:32,asyncTick:10},s),{c,dkLen:u,asyncTick:l}=a;if(r.default.number(c),r.default.number(u),r.default.number(l),c<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const d=(0,i.toBytes)(t),f=(0,i.toBytes)(n),h=new Uint8Array(u),p=o.hmac.create(e,d),y=p._cloneInto().update(f);return{c,dkLen:u,asyncTick:l,DK:h,PRF:p,PRFSalt:y}}function a(e,t,n,r,o){return e.destroy(),t.destroy(),r&&r.destroy(),o.fill(0),n}t.pbkdf2=function(e,t,n,r){const{c:o,dkLen:c,DK:u,PRF:l,PRFSalt:d}=s(e,t,n,r);let f;const h=new Uint8Array(4),p=(0,i.createView)(h),y=new Uint8Array(l.outputLen);for(let e=1,t=0;t<c;e++,t+=l.outputLen){const n=u.subarray(t,t+l.outputLen);p.setInt32(0,e,!1),(f=d._cloneInto(f)).update(h).digestInto(y),n.set(y.subarray(0,n.length));for(let e=1;e<o;e++){l._cloneInto(f).update(y).digestInto(y);for(let e=0;e<n.length;e++)n[e]^=y[e]}}return a(l,d,u,f,y)},t.pbkdf2Async=async function(e,t,n,r){const{c:o,dkLen:c,asyncTick:u,DK:l,PRF:d,PRFSalt:f}=s(e,t,n,r);let h;const p=new Uint8Array(4),y=(0,i.createView)(p),b=new Uint8Array(d.outputLen);for(let e=1,t=0;t<c;e++,t+=d.outputLen){const n=l.subarray(t,t+d.outputLen);y.setInt32(0,e,!1),(h=f._cloneInto(h)).update(p).digestInto(b),n.set(b.subarray(0,n.length)),await(0,i.asyncLoop)(o-1,u,(e=>{d._cloneInto(h).update(b).digestInto(b);for(let e=0;e<n.length;e++)n[e]^=b[e]}))}return a(d,f,l,h,b)}},830:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ripemd160=t.RIPEMD160=void 0;const r=n(7505),o=n(8089),i=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),s=Uint8Array.from({length:16},((e,t)=>t)),a=s.map((e=>(9*e+5)%16));let c=[s],u=[a];for(let e=0;e<4;e++)for(let t of[c,u])t.push(t[e].map((e=>i[e])));const l=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((e=>new Uint8Array(e))),d=c.map(((e,t)=>e.map((e=>l[t][e])))),f=u.map(((e,t)=>e.map((e=>l[t][e])))),h=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),p=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),y=(e,t)=>e<<t|e>>>32-t;function b(e,t,n,r){return 0===e?t^n^r:1===e?t&n|~t&r:2===e?(t|~n)^r:3===e?t&r|n&~r:t^(n|~r)}const g=new Uint32Array(16);class m extends r.SHA2{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:n,h3:r,h4:o}=this;return[e,t,n,r,o]}set(e,t,n,r,o){this.h0=0|e,this.h1=0|t,this.h2=0|n,this.h3=0|r,this.h4=0|o}process(e,t){for(let n=0;n<16;n++,t+=4)g[n]=e.getUint32(t,!0);let n=0|this.h0,r=n,o=0|this.h1,i=o,s=0|this.h2,a=s,l=0|this.h3,m=l,v=0|this.h4,w=v;for(let e=0;e<5;e++){const t=4-e,_=h[e],E=p[e],x=c[e],k=u[e],B=d[e],O=f[e];for(let t=0;t<16;t++){const r=y(n+b(e,o,s,l)+g[x[t]]+_,B[t])+v|0;n=v,v=l,l=0|y(s,10),s=o,o=r}for(let e=0;e<16;e++){const n=y(r+b(t,i,a,m)+g[k[e]]+E,O[e])+w|0;r=w,w=m,m=0|y(a,10),a=i,i=n}}this.set(this.h1+s+m|0,this.h2+l+w|0,this.h3+v+r|0,this.h4+n+i|0,this.h0+o+a|0)}roundClean(){g.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}t.RIPEMD160=m,t.ripemd160=(0,o.wrapConstructor)((()=>new m))},3061:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sha224=t.sha256=void 0;const r=n(7505),o=n(8089),i=(e,t,n)=>e&t^e&n^t&n,s=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=new Uint32Array(64);class u extends r.SHA2{constructor(){super(64,32,8,!1),this.A=0|a[0],this.B=0|a[1],this.C=0|a[2],this.D=0|a[3],this.E=0|a[4],this.F=0|a[5],this.G=0|a[6],this.H=0|a[7]}get(){const{A:e,B:t,C:n,D:r,E:o,F:i,G:s,H:a}=this;return[e,t,n,r,o,i,s,a]}set(e,t,n,r,o,i,s,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|o,this.F=0|i,this.G=0|s,this.H=0|a}process(e,t){for(let n=0;n<16;n++,t+=4)c[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=c[e-15],n=c[e-2],r=(0,o.rotr)(t,7)^(0,o.rotr)(t,18)^t>>>3,i=(0,o.rotr)(n,17)^(0,o.rotr)(n,19)^n>>>10;c[e]=i+c[e-7]+r+c[e-16]|0}let{A:n,B:r,C:a,D:u,E:l,F:d,G:f,H:h}=this;for(let e=0;e<64;e++){const t=h+((0,o.rotr)(l,6)^(0,o.rotr)(l,11)^(0,o.rotr)(l,25))+((p=l)&d^~p&f)+s[e]+c[e]|0,y=((0,o.rotr)(n,2)^(0,o.rotr)(n,13)^(0,o.rotr)(n,22))+i(n,r,a)|0;h=f,f=d,d=l,l=u+t|0,u=a,a=r,r=n,n=t+y|0}var p;n=n+this.A|0,r=r+this.B|0,a=a+this.C|0,u=u+this.D|0,l=l+this.E|0,d=d+this.F|0,f=f+this.G|0,h=h+this.H|0,this.set(n,r,a,u,l,d,f,h)}roundClean(){c.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class l extends u{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}t.sha256=(0,o.wrapConstructor)((()=>new u)),t.sha224=(0,o.wrapConstructor)((()=>new l))},6262:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sha384=t.sha512_256=t.sha512_224=t.sha512=t.SHA512=void 0;const r=n(7505),o=n(6873),i=n(8089),[s,a]=o.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))),c=new Uint32Array(80),u=new Uint32Array(80);class l extends r.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:o,Cl:i,Dh:s,Dl:a,Eh:c,El:u,Fh:l,Fl:d,Gh:f,Gl:h,Hh:p,Hl:y}=this;return[e,t,n,r,o,i,s,a,c,u,l,d,f,h,p,y]}set(e,t,n,r,o,i,s,a,c,u,l,d,f,h,p,y){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|o,this.Cl=0|i,this.Dh=0|s,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|d,this.Gh=0|f,this.Gl=0|h,this.Hh=0|p,this.Hl=0|y}process(e,t){for(let n=0;n<16;n++,t+=4)c[n]=e.getUint32(t),u[n]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|c[e-15],n=0|u[e-15],r=o.default.rotrSH(t,n,1)^o.default.rotrSH(t,n,8)^o.default.shrSH(t,n,7),i=o.default.rotrSL(t,n,1)^o.default.rotrSL(t,n,8)^o.default.shrSL(t,n,7),s=0|c[e-2],a=0|u[e-2],l=o.default.rotrSH(s,a,19)^o.default.rotrBH(s,a,61)^o.default.shrSH(s,a,6),d=o.default.rotrSL(s,a,19)^o.default.rotrBL(s,a,61)^o.default.shrSL(s,a,6),f=o.default.add4L(i,d,u[e-7],u[e-16]),h=o.default.add4H(f,r,l,c[e-7],c[e-16]);c[e]=0|h,u[e]=0|f}let{Ah:n,Al:r,Bh:i,Bl:l,Ch:d,Cl:f,Dh:h,Dl:p,Eh:y,El:b,Fh:g,Fl:m,Gh:v,Gl:w,Hh:_,Hl:E}=this;for(let e=0;e<80;e++){const t=o.default.rotrSH(y,b,14)^o.default.rotrSH(y,b,18)^o.default.rotrBH(y,b,41),x=o.default.rotrSL(y,b,14)^o.default.rotrSL(y,b,18)^o.default.rotrBL(y,b,41),k=y&g^~y&v,B=b&m^~b&w,O=o.default.add5L(E,x,B,a[e],u[e]),S=o.default.add5H(O,_,t,k,s[e],c[e]),A=0|O,I=o.default.rotrSH(n,r,28)^o.default.rotrBH(n,r,34)^o.default.rotrBH(n,r,39),T=o.default.rotrSL(n,r,28)^o.default.rotrBL(n,r,34)^o.default.rotrBL(n,r,39),C=n&i^n&d^i&d,j=r&l^r&f^l&f;_=0|v,E=0|w,v=0|g,w=0|m,g=0|y,m=0|b,({h:y,l:b}=o.default.add(0|h,0|p,0|S,0|A)),h=0|d,p=0|f,d=0|i,f=0|l,i=0|n,l=0|r;const L=o.default.add3L(A,T,j);n=o.default.add3H(L,S,I,C),r=0|L}({h:n,l:r}=o.default.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:i,l}=o.default.add(0|this.Bh,0|this.Bl,0|i,0|l)),({h:d,l:f}=o.default.add(0|this.Ch,0|this.Cl,0|d,0|f)),({h,l:p}=o.default.add(0|this.Dh,0|this.Dl,0|h,0|p)),({h:y,l:b}=o.default.add(0|this.Eh,0|this.El,0|y,0|b)),({h:g,l:m}=o.default.add(0|this.Fh,0|this.Fl,0|g,0|m)),({h:v,l:w}=o.default.add(0|this.Gh,0|this.Gl,0|v,0|w)),({h:_,l:E}=o.default.add(0|this.Hh,0|this.Hl,0|_,0|E)),this.set(n,r,i,l,d,f,h,p,y,b,g,m,v,w,_,E)}roundClean(){c.fill(0),u.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}t.SHA512=l;class d extends l{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class f extends l{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class h extends l{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}t.sha512=(0,i.wrapConstructor)((()=>new l)),t.sha512_224=(0,i.wrapConstructor)((()=>new d)),t.sha512_256=(0,i.wrapConstructor)((()=>new f)),t.sha384=(0,i.wrapConstructor)((()=>new h))},8089:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.isLE=t.rotr=t.createView=t.u32=t.u8=void 0;const r=n(1945),o=e=>e instanceof Uint8Array;if(t.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),t.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),t.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),t.rotr=(e,t)=>e<<32-t|e>>>t,t.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!t.isLE)throw new Error("Non little-endian hardware is not supported");const i=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function s(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function a(e){if("string"==typeof e&&(e=s(e)),!o(e))throw new Error("expected Uint8Array, got "+typeof e);return e}t.bytesToHex=function(e){if(!o(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=i[e[n]];return t},t.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let t=0;t<n.length;t++){const r=2*t,o=e.slice(r,r+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[t]=i}return n},t.nextTick=async()=>{},t.asyncLoop=async function(e,n,r){let o=Date.now();for(let i=0;i<e;i++){r(i);const e=Date.now()-o;e>=0&&e<n||(await(0,t.nextTick)(),o+=e)}},t.utf8ToBytes=s,t.toBytes=a,t.concatBytes=function(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;return e.forEach((e=>{if(!o(e))throw new Error("Uint8Array expected");t.set(e,n),n+=e.length})),t},t.Hash=class{clone(){return this._cloneInto()}},t.checkOpts=function(e,t){if(void 0!==t&&("object"!=typeof t||(n=t,"[object Object]"!==Object.prototype.toString.call(n)||n.constructor!==Object)))throw new Error("Options should be object or undefined");var n;return Object.assign(e,t)},t.wrapConstructor=function(e){const t=t=>e().update(a(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t},t.wrapConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(a(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},t.wrapXOFConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(a(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},t.randomBytes=function(e=32){if(r.crypto&&"function"==typeof r.crypto.getRandomValues)return r.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}},9187:(e,t)=>{"use strict";function n(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function r(...e){const t=(e,t)=>n=>e(t(n));return{encode:Array.from(e).reverse().reduce(((e,n)=>e?t(e,n.encode):n.encode),void 0),decode:e.reduce(((e,n)=>e?t(e,n.decode):n.decode),void 0)}}function o(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(n(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(-1===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n}))}}}function i(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function s(e,t="="){if(n(e),"string"!=typeof t)throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function a(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function c(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let o=0;const i=[],s=Array.from(e);for(s.forEach((e=>{if(n(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,n=!0;for(let i=o;i<s.length;i++){const a=s[i],c=t*e+a;if(!Number.isSafeInteger(c)||t*e/t!==e||c-a!=t*e)throw new Error("convertRadix: carry overflow");if(e=c%r,s[i]=Math.floor(c/r),!Number.isSafeInteger(s[i])||s[i]*r+e!==c)throw new Error("convertRadix: carry overflow");n&&(s[i]?n=!1:o=i)}if(i.push(e),n)break}for(let t=0;t<e.length-1&&0===e[t];t++)i.push(0);return i.reverse()}Object.defineProperty(t,"__esModule",{value:!0}),t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64url=t.base64=t.base32crockford=t.base32hex=t.base32=t.base16=t.utils=t.assertNumber=void 0,t.assertNumber=n;const u=(e,t)=>t?u(t,e%t):e,l=(e,t)=>e+(t-u(e,t));function d(e,t,r,o){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(l(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${l(t,r)}`);let i=0,s=0;const a=2**r-1,c=[];for(const o of e){if(n(o),o>=2**t)throw new Error(`convertRadix2: invalid data word=${o} from=${t}`);if(i=i<<t|o,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=r;s-=r)c.push((i>>s-r&a)>>>0);i&=2**s-1}if(i=i<<r-s&a,!o&&s>=t)throw new Error("Excess padding");if(!o&&i)throw new Error(`Non-zero padding: ${i}`);return o&&s>0&&c.push(i>>>0),c}function f(e){return n(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return c(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(c(t,e,256))}}}function h(e,t=!1){if(n(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(l(8,e)>32||l(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return d(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(d(n,e,8,t))}}}function p(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(e){}}}function y(e,t){if(n(e),"function"!=typeof t)throw new Error("checksum fn should be function");return{encode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const r=t(n).slice(0,e),o=new Uint8Array(n.length+e);return o.set(n),o.set(r,n.length),o},decode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-e),o=t(r).slice(0,e),i=n.slice(-e);for(let t=0;t<e;t++)if(o[t]!==i[t])throw new Error("Invalid checksum");return r}}}t.utils={alphabet:o,chain:r,checksum:y,radix:f,radix2:h,join:i,padding:s},t.base16=r(h(4),o("0123456789ABCDEF"),i("")),t.base32=r(h(5),o("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),s(5),i("")),t.base32hex=r(h(5),o("0123456789ABCDEFGHIJKLMNOPQRSTUV"),s(5),i("")),t.base32crockford=r(h(5),o("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),i(""),a((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),t.base64=r(h(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),s(6),i("")),t.base64url=r(h(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),s(6),i(""));const b=e=>r(f(58),o(e),i(""));t.base58=b("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),t.base58flickr=b("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),t.base58xrp=b("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const g=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode(e){let n="";for(let r=0;r<e.length;r+=8){const o=e.subarray(r,r+8);n+=t.base58.encode(o).padStart(g[o.length],"1")}return n},decode(e){let n=[];for(let r=0;r<e.length;r+=11){const o=e.slice(r,r+11),i=g.indexOf(o.length),s=t.base58.decode(o);for(let e=0;e<s.length-i;e++)if(0!==s[e])throw new Error("base58xmr: wrong padding");n=n.concat(Array.from(s.slice(s.length-i)))}return Uint8Array.from(n)}},t.base58check=e=>r(y(4,(t=>e(e(t)))),t.base58);const m=r(o("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),i("")),v=[996825010,642813549,513874426,1027748829,705979059];function w(e){const t=e>>25;let n=(33554431&e)<<5;for(let e=0;e<v.length;e++)1==(t>>e&1)&&(n^=v[e]);return n}function _(e,t,n=1){const r=e.length;let o=1;for(let t=0;t<r;t++){const n=e.charCodeAt(t);if(n<33||n>126)throw new Error(`Invalid prefix (${e})`);o=w(o)^n>>5}o=w(o);for(let t=0;t<r;t++)o=w(o)^31&e.charCodeAt(t);for(let e of t)o=w(o)^e;for(let e=0;e<6;e++)o=w(o);return o^=n,m.encode(d([o%2**30],30,5,!1))}function E(e){const t="bech32"===e?1:734539939,n=h(5),r=n.decode,o=n.encode,i=p(r);function s(e,n=90){if("string"!=typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==n&&e.length>n)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${n})`);const r=e.toLowerCase();if(e!==r&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const o=(e=r).lastIndexOf("1");if(0===o||-1===o)throw new Error('Letter "1" must be present between prefix and data only');const i=e.slice(0,o),s=e.slice(o+1);if(s.length<6)throw new Error("Data must be at least 6 characters long");const a=m.decode(s).slice(0,-6),c=_(i,a,t);if(!s.endsWith(c))throw new Error(`Invalid checksum in ${e}: expected "${c}"`);return{prefix:i,words:a}}return{encode:function(e,n,r=90){if("string"!=typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof n);const o=e.length+7+n.length;if(!1!==r&&o>r)throw new TypeError(`Length ${o} exceeds limit ${r}`);return`${e=e.toLowerCase()}1${m.encode(n)}${_(e,n,t)}`},decode:s,decodeToBytes:function(e){const{prefix:t,words:n}=s(e,!1);return{prefix:t,words:n,bytes:r(n)}},decodeUnsafe:p(s),fromWords:r,fromWordsUnsafe:i,toWords:o}}t.bech32=E("bech32"),t.bech32m=E("bech32m"),t.utf8={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},t.hex=r(h(4),o("0123456789abcdef"),i(""),a((e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})));const x={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr},k=`Invalid encoding type. Available types: ${Object.keys(x).join(", ")}`;t.bytesToString=(e,t)=>{if("string"!=typeof e||!x.hasOwnProperty(e))throw new TypeError(k);if(!(t instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return x[e].encode(t)},t.str=t.bytesToString,t.stringToBytes=(e,t)=>{if(!x.hasOwnProperty(e))throw new TypeError(k);if("string"!=typeof t)throw new TypeError("stringToBytes() expects string");return x[e].decode(t)},t.bytes=t.stringToBytes},1869:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HDKey=t.HARDENED_OFFSET=void 0;const r=n(9569),o=n(830),i=n(3061),s=n(6262),a=n(7320),c=n(8089),u=n(3497),l=n(4632),d=n(9187),f=u.secp256k1.ProjectivePoint,h=(0,d.base58check)(i.sha256);function p(e){return BigInt(`0x${(0,c.bytesToHex)(e)}`)}const y=(0,c.utf8ToBytes)("Bitcoin seed"),b={private:76066276,public:76067358};t.HARDENED_OFFSET=2147483648;const g=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const t=new Uint8Array(4);return(0,c.createView)(t).setUint32(0,e,!1),t};class m{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return e=this.pubHash,(0,c.createView)(e).getUint32(0,!1);var e}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const e=this.privateKey;if(!e)throw new Error("No private key");return h.encode(this.serialize(this.versions.private,(0,c.concatBytes)(new Uint8Array([0]),e)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return h.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(e,t=b){if((0,a.bytes)(e),8*e.length<128||8*e.length>512)throw new Error(`HDKey: wrong seed length=${e.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const n=(0,r.hmac)(s.sha512,y,e);return new m({versions:t,chainCode:n.slice(32),privateKey:n.slice(0,32)})}static fromExtendedKey(e,t=b){const n=h.decode(e),r=(0,c.createView)(n),o=r.getUint32(0,!1),i={versions:t,depth:n[4],parentFingerprint:r.getUint32(5,!1),index:r.getUint32(9,!1),chainCode:n.slice(13,45)},s=n.slice(45),a=0===s[0];if(o!==t[a?"private":"public"])throw new Error("Version mismatch");return new m(a?{...i,privateKey:s.slice(1)}:{...i,publicKey:s})}static fromJSON(e){return m.fromExtendedKey(e.xpriv)}constructor(e){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!e||"object"!=typeof e)throw new Error("HDKey.constructor must not be called directly");if(this.versions=e.versions||b,this.depth=e.depth||0,this.chainCode=e.chainCode,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(e.publicKey&&e.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(e.privateKey){if(!u.secp256k1.utils.isValidPrivateKey(e.privateKey))throw new Error("Invalid private key");this.privKey="bigint"==typeof e.privateKey?e.privateKey:p(e.privateKey),this.privKeyBytes=(t=this.privKey,(0,c.hexToBytes)(t.toString(16).padStart(64,"0"))),this.pubKey=u.secp256k1.getPublicKey(e.privateKey,!0)}else{if(!e.publicKey)throw new Error("HDKey: no public or private key provided");this.pubKey=f.fromHex(e.publicKey).toRawBytes(!0)}var t,n;this.pubHash=(n=this.pubKey,(0,o.ripemd160)((0,i.sha256)(n)))}derive(e){if(!/^[mM]'?/.test(e))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;const n=e.replace(/^[mM]'?\//,"").split("/");let r=this;for(const e of n){const n=/^(\d+)('?)$/.exec(e);if(!n||3!==n.length)throw new Error(`Invalid child index: ${e}`);let o=+n[1];if(!Number.isSafeInteger(o)||o>=t.HARDENED_OFFSET)throw new Error("Invalid index");"'"===n[2]&&(o+=t.HARDENED_OFFSET),r=r.deriveChild(o)}return r}deriveChild(e){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let n=g(e);if(e>=t.HARDENED_OFFSET){const e=this.privateKey;if(!e)throw new Error("Could not derive hardened child key");n=(0,c.concatBytes)(new Uint8Array([0]),e,n)}else n=(0,c.concatBytes)(this.pubKey,n);const o=(0,r.hmac)(s.sha512,this.chainCode,n),i=p(o.slice(0,32)),a=o.slice(32);if(!u.secp256k1.utils.isValidPrivateKey(i))throw new Error("Tweak bigger than curve order");const d={versions:this.versions,chainCode:a,depth:this.depth+1,parentFingerprint:this.fingerprint,index:e};try{if(this.privateKey){const e=(0,l.mod)(this.privKey+i,u.secp256k1.CURVE.n);if(!u.secp256k1.utils.isValidPrivateKey(e))throw new Error("The tweak was out of range or the resulted private key is invalid");d.privateKey=e}else{const e=f.fromHex(this.pubKey).add(f.fromPrivateKey(i));if(e.equals(f.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");d.publicKey=e.toRawBytes(!0)}return new m(d)}catch(t){return this.deriveChild(e+1)}}sign(e){if(!this.privateKey)throw new Error("No privateKey set!");return(0,a.bytes)(e,32),u.secp256k1.sign(e,this.privKey).toCompactRawBytes()}verify(e,t){if((0,a.bytes)(e,32),(0,a.bytes)(t,64),!this.publicKey)throw new Error("No publicKey set!");let n;try{n=u.secp256k1.Signature.fromCompact(t)}catch(e){return!1}return u.secp256k1.verify(n,e,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(e,t){if(!this.chainCode)throw new Error("No chainCode set");return(0,a.bytes)(t,33),(0,c.concatBytes)(g(e),new Uint8Array([this.depth]),g(this.parentFingerprint),g(this.index),this.chainCode,t)}}t.HDKey=m},7286:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mnemonicToSeedSync=t.mnemonicToSeed=t.validateMnemonic=t.entropyToMnemonic=t.mnemonicToEntropy=t.generateMnemonic=void 0;const r=n(7320),o=n(9023),i=n(3061),s=n(6262),a=n(8089),c=n(9187);function u(e){if("string"!=typeof e)throw new TypeError("Invalid mnemonic type: "+typeof e);return e.normalize("NFKD")}function l(e){const t=u(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}function d(e){r.default.bytes(e,16,20,24,28,32)}t.generateMnemonic=function(e,t=128){if(r.default.number(t),t%32!=0||t>256)throw new TypeError("Invalid entropy");return y((0,a.randomBytes)(t/8),e)};const f=e=>{const t=8-e.length/4;return new Uint8Array([(0,i.sha256)(e)[0]>>t<<t])};function h(e){if(!Array.isArray(e)||2048!==e.length||"string"!=typeof e[0])throw new Error("Worlist: expected array of 2048 strings");return e.forEach((e=>{if("string"!=typeof e)throw new Error(`Wordlist: non-string element: ${e}`)})),c.utils.chain(c.utils.checksum(1,f),c.utils.radix2(11,!0),c.utils.alphabet(e))}function p(e,t){const{words:n}=l(e),r=h(t).decode(n);return d(r),r}function y(e,t){return d(e),h(t).encode(e).join((e=>"あいこくしん"===e[0])(t)?"　":" ")}t.mnemonicToEntropy=p,t.entropyToMnemonic=y,t.validateMnemonic=function(e,t){try{p(e,t)}catch(e){return!1}return!0};const b=e=>u(`mnemonic${e}`);t.mnemonicToSeed=function(e,t=""){return(0,o.pbkdf2Async)(s.sha512,l(e).nfkd,b(t),{c:2048,dkLen:64})},t.mnemonicToSeedSync=function(e,t=""){return(0,o.pbkdf2)(s.sha512,l(e).nfkd,b(t),{c:2048,dkLen:64})}},1083:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wordlist=void 0,t.wordlist="abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo".split("\n")},284:e=>{var t=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return t()}try{return __global__||t()}finally{delete Object.prototype.__global__}}()},7340:(e,t,n)=>{"use strict";var r,o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,c=(e,t)=>{for(var n in t)o(e,n,{get:t[n],enumerable:!0})},u={};c(u,{Kind:()=>O,SimplePool:()=>Z,eventsGenerator:()=>W,finishEvent:()=>A,fj:()=>M,generatePrivateKey:()=>f,getBlankEvent:()=>S,getEventHash:()=>T,getPublicKey:()=>h,getSignature:()=>H,matchFilter:()=>N,matchFilters:()=>U,mergeFilters:()=>q,nip04:()=>ye,nip05:()=>Ee,nip06:()=>Ae,nip10:()=>Ne,nip13:()=>qe,nip18:()=>De,nip19:()=>J,nip21:()=>$e,nip25:()=>Ze,nip26:()=>Xe,nip27:()=>ot,nip28:()=>ct,nip39:()=>yt,nip42:()=>mt,nip44:()=>wt,nip47:()=>jt,nip57:()=>Ht,nip98:()=>zt,parseReferences:()=>pe,relayInit:()=>G,serializeEvent:()=>I,signEvent:()=>P,utils:()=>g,validateEvent:()=>j,verifiedSymbol:()=>B,verifySignature:()=>L}),e.exports=(r=u,((e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of s(t))a.call(e,n)||undefined===n||o(e,n,{get:()=>t[n],enumerable:!(r=i(t,n))||r.enumerable});return e})(o({},"__esModule",{value:!0}),r));var l=n(3497),d=n(8089);function f(){return(0,d.bytesToHex)(l.schnorr.utils.randomPrivateKey())}function h(e){return(0,d.bytesToHex)(l.schnorr.getPublicKey(e))}var p=n(3497),y=n(3061),b=n(8089),g={};c(g,{MessageNode:()=>x,MessageQueue:()=>k,insertEventIntoAscendingList:()=>E,insertEventIntoDescendingList:()=>_,normalizeURL:()=>w,utf8Decoder:()=>m,utf8Encoder:()=>v});var m=new TextDecoder("utf-8"),v=new TextEncoder;function w(e){let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),("80"===t.port&&"ws:"===t.protocol||"443"===t.port&&"wss:"===t.protocol)&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}function _(e,t){let n,r=0,o=e.length-1,i=r;if(o<0)i=0;else if(t.created_at<e[o].created_at)i=o+1;else if(t.created_at>=e[r].created_at)i=r;else for(;;){if(o<=r+1){i=o;break}if(n=Math.floor(r+(o-r)/2),e[n].created_at>t.created_at)r=n;else{if(!(e[n].created_at<t.created_at)){i=n;break}o=n}}return e[i]?.id!==t.id?[...e.slice(0,i),t,...e.slice(i)]:e}function E(e,t){let n,r=0,o=e.length-1,i=r;if(o<0)i=0;else if(t.created_at>e[o].created_at)i=o+1;else if(t.created_at<=e[r].created_at)i=r;else for(;;){if(o<=r+1){i=o;break}if(n=Math.floor(r+(o-r)/2),e[n].created_at<t.created_at)r=n;else{if(!(e[n].created_at>t.created_at)){i=n;break}o=n}}return e[i]?.id!==t.id?[...e.slice(0,i),t,...e.slice(i)]:e}var x=class{_value;_next;get value(){return this._value}set value(e){this._value=e}get next(){return this._next}set next(e){this._next=e}constructor(e){this._value=e,this._next=null}},k=class{_first;_last;get first(){return this._first}set first(e){this._first=e}get last(){return this._last}set last(e){this._last=e}_size;get size(){return this._size}set size(e){this._size=e}constructor(){this._first=null,this._last=null,this._size=0}enqueue(e){const t=new x(e);return 0!==this._size&&this._last?(this._last.next=t,this._last=t):(this._first=t,this._last=t),this._size++,!0}dequeue(){if(0===this._size||!this._first)return null;let e=this._first;return this._first=e.next,e.next=null,this._size--,e.value}},B=Symbol("verified"),O=(e=>(e[e.Metadata=0]="Metadata",e[e.Text=1]="Text",e[e.RecommendRelay=2]="RecommendRelay",e[e.Contacts=3]="Contacts",e[e.EncryptedDirectMessage=4]="EncryptedDirectMessage",e[e.EventDeletion=5]="EventDeletion",e[e.Repost=6]="Repost",e[e.Reaction=7]="Reaction",e[e.BadgeAward=8]="BadgeAward",e[e.ChannelCreation=40]="ChannelCreation",e[e.ChannelMetadata=41]="ChannelMetadata",e[e.ChannelMessage=42]="ChannelMessage",e[e.ChannelHideMessage=43]="ChannelHideMessage",e[e.ChannelMuteUser=44]="ChannelMuteUser",e[e.Blank=255]="Blank",e[e.Report=1984]="Report",e[e.ZapRequest=9734]="ZapRequest",e[e.Zap=9735]="Zap",e[e.RelayList=10002]="RelayList",e[e.ClientAuth=22242]="ClientAuth",e[e.NwcRequest=23194]="NwcRequest",e[e.HttpAuth=27235]="HttpAuth",e[e.ProfileBadge=30008]="ProfileBadge",e[e.BadgeDefinition=30009]="BadgeDefinition",e[e.Article=30023]="Article",e[e.FileMetadata=1063]="FileMetadata",e))(O||{});function S(e=255){return{kind:e,content:"",tags:[],created_at:0}}function A(e,t){const n=e;return n.pubkey=h(t),n.id=T(n),n.sig=H(n,t),n[B]=!0,n}function I(e){if(!j(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function T(e){let t=(0,y.sha256)(v.encode(I(e)));return(0,b.bytesToHex)(t)}var C=e=>e instanceof Object;function j(e){if(!C(e))return!1;if("number"!=typeof e.kind)return!1;if("string"!=typeof e.content)return!1;if("number"!=typeof e.created_at)return!1;if("string"!=typeof e.pubkey)return!1;if(!e.pubkey.match(/^[a-f0-9]{64}$/))return!1;if(!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let e=0;e<n.length;e++)if("object"==typeof n[e])return!1}return!0}function L(e){if("boolean"==typeof e[B])return e[B];const t=T(e);if(t!==e.id)return e[B]=!1;try{return e[B]=p.schnorr.verify(e.sig,t,e.pubkey)}catch(t){return e[B]=!1}}function P(e,t){return console.warn("nostr-tools: `signEvent` is deprecated and will be removed or changed in the future. Please use `getSignature` instead."),H(e,t)}function H(e,t){return(0,b.bytesToHex)(p.schnorr.sign(T(e),t))}function N(e,t){if(e.ids&&-1===e.ids.indexOf(t.id)&&!e.ids.some((e=>t.id.startsWith(e))))return!1;if(e.kinds&&-1===e.kinds.indexOf(t.kind))return!1;if(e.authors&&-1===e.authors.indexOf(t.pubkey)&&!e.authors.some((e=>t.pubkey.startsWith(e))))return!1;for(let n in e)if("#"===n[0]){let r=e[`#${n.slice(1)}`];if(r&&!t.tags.find((([e,t])=>e===n.slice(1)&&-1!==r.indexOf(t))))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>e.until)}function U(e,t){for(let n=0;n<e.length;n++)if(N(e[n],t))return!0;return!1}function q(...e){let t={};for(let n=0;n<e.length;n++){let r=e[n];Object.entries(r).forEach((([e,n])=>{if("kinds"===e||"ids"===e||"authors"===e||"#"===e[0]){t[e]=t[e]||[];for(let r=0;r<n.length;r++){let o=n[r];t[e].includes(o)||t[e].push(o)}}})),r.limit&&(!t.limit||r.limit>t.limit)&&(t.limit=r.limit),r.until&&(!t.until||r.until>t.until)&&(t.until=r.until),r.since&&(!t.since||r.since<t.since)&&(t.since=r.since)}return t}var M={};function R(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,o=e.slice(r).indexOf('"')+r+1;return e.slice(o,o+64)}function D(e,t){let n=t.length,r=e.indexOf(`"${t}":`)+n+3,o=e.slice(r),i=Math.min(o.indexOf(","),o.indexOf("}"));return parseInt(o.slice(0,i),10)}function F(e){let t=e.slice(0,22).indexOf('"EVENT"');if(-1===t)return null;let n=e.slice(t+7+1).indexOf('"');if(-1===n)return null;let r=t+7+1+n,o=e.slice(r+1,80).indexOf('"');if(-1===o)return null;let i=r+1+o;return e.slice(r+1,i)}function z(e,t){return t===R(e,"id")}function K(e,t){return t===R(e,"pubkey")}function $(e,t){return t===D(e,"kind")}c(M,{getHex64:()=>R,getInt:()=>D,getSubscriptionId:()=>F,matchEventId:()=>z,matchEventKind:()=>$,matchEventPubkey:()=>K});var V=()=>({connect:[],disconnect:[],error:[],notice:[],auth:[]});function G(e,t={}){let{listTimeout:n=3e3,getTimeout:r=3e3,countTimeout:o=3e3}=t;var i,s,a={},c=V(),u={},l={};function d(){return 1===i?.readyState}async function f(e){let t=JSON.stringify(e);if(d()||(await new Promise((e=>setTimeout(e,1e3))),d()))try{i.send(t)}catch(e){console.log(e)}}const h=(e,{verb:t="REQ",skipVerification:n=!1,alreadyHaveEvent:r=null,id:o=Math.random().toString().slice(2)}={})=>{let i=o;a[i]={id:i,filters:e,skipVerification:n,alreadyHaveEvent:r},f([t,i,...e]);let s={sub:(t,o={})=>h(t||e,{skipVerification:o.skipVerification||n,alreadyHaveEvent:o.alreadyHaveEvent||r,id:i}),unsub:()=>{delete a[i],delete u[i],f(["CLOSE",i])},on:(e,t)=>{u[i]=u[i]||{event:[],count:[],eose:[]},u[i][e].push(t)},off:(e,t)=>{let n=u[i],r=n[e].indexOf(t);r>=0&&n[e].splice(r,1)},get events(){return W(s)}};return s};function p(e,t){return new Promise(((n,r)=>{if(!e.id)return void r(new Error(`event ${e} has no id`));let o=e.id;f([t,e]),l[o]={resolve:n,reject:r}}))}return{url:e,sub:h,on:(e,t)=>{c[e].push(t),"connect"===e&&1===i?.readyState&&t()},off:(e,t)=>{let n=c[e].indexOf(t);-1!==n&&c[e].splice(n,1)},list:(e,t)=>new Promise((r=>{let o=h(e,t),i=[],s=setTimeout((()=>{o.unsub(),r(i)}),n);o.on("eose",(()=>{o.unsub(),clearTimeout(s),r(i)})),o.on("event",(e=>{i.push(e)}))})),get:(e,t)=>new Promise((n=>{let o=h([e],t),i=setTimeout((()=>{o.unsub(),n(null)}),r);o.on("event",(e=>{o.unsub(),clearTimeout(i),n(e)}))})),count:e=>new Promise((t=>{let n=h(e,{...h,verb:"COUNT"}),r=setTimeout((()=>{n.unsub(),t(null)}),o);n.on("count",(e=>{n.unsub(),clearTimeout(r),t(e)}))})),async publish(e){await p(e,"EVENT")},async auth(e){await p(e,"AUTH")},connect:async function(){d()||await async function(){return s||(s=new Promise(((t,n)=>{try{i=new WebSocket(e)}catch(e){n(e)}i.onopen=()=>{c.connect.forEach((e=>e())),t()},i.onerror=()=>{s=void 0,c.error.forEach((e=>e())),n()},i.onclose=async()=>{s=void 0,c.disconnect.forEach((e=>e()))};let r,o=new k;function d(){if(0===o.size)return clearInterval(r),void(r=null);var t=o.dequeue();if(!t)return;let n=F(t);if(n){let r=a[n];if(r&&r.alreadyHaveEvent&&r.alreadyHaveEvent(R(t,"id"),e))return}try{let e=JSON.parse(t);switch(e[0]){case"EVENT":{let t=e[1],n=e[2];return void(j(n)&&a[t]&&(a[t].skipVerification||L(n))&&U(a[t].filters,n)&&(a[t],(u[t]?.event||[]).forEach((e=>e(n)))))}case"COUNT":let t=e[1],n=e[2];return void(a[t]&&(u[t]?.count||[]).forEach((e=>e(n))));case"EOSE":{let t=e[1];return void(t in u&&(u[t].eose.forEach((e=>e())),u[t].eose=[]))}case"OK":{let t=e[1],n=e[2],r=e[3]||"";if(t in l){let{resolve:e,reject:o}=l[t];n?e(null):o(new Error(r))}return}case"NOTICE":let r=e[1];return void c.notice.forEach((e=>e(r)));case"AUTH":{let t=e[1];return void c.auth?.forEach((e=>e(t)))}}}catch(e){return}}i.onmessage=e=>{o.enqueue(e.data),r||(r=setInterval(d,0))}})))}()},close(){c=V(),u={},l={},i?.readyState===WebSocket.OPEN&&i.close()},get status(){return i?.readyState??3}}}async function*W(e){let t;const n=[],r=e=>{t?(t(e),t=void 0):n.push(e)};e.on("event",r);try{for(;;)if(n.length>0)yield n.shift();else{const e=await new Promise((e=>{t=e}));yield e}}finally{e.off("event",r)}}var Z=class{_conn;_seenOn={};batchedByKey={};eoseSubTimeout;getTimeout;seenOnEnabled=!0;batchInterval=100;constructor(e={}){this._conn={},this.eoseSubTimeout=e.eoseSubTimeout||3400,this.getTimeout=e.getTimeout||3400,this.seenOnEnabled=!1!==e.seenOnEnabled,this.batchInterval=e.batchInterval||100}close(e){e.forEach((e=>{let t=this._conn[w(e)];t&&t.close()}))}async ensureRelay(e){const t=w(e);this._conn[t]||(this._conn[t]=G(t,{getTimeout:.9*this.getTimeout,listTimeout:.9*this.getTimeout}));const n=this._conn[t];return await n.connect(),n}sub(e,t,n){let r=new Set,o={...n||{}};o.alreadyHaveEvent=(e,t)=>{if(n?.alreadyHaveEvent?.(e,t))return!0;if(this.seenOnEnabled){let n=this._seenOn[e]||new Set;n.add(t),this._seenOn[e]=n}return r.has(e)};let i=[],s=new Set,a=new Set,c=e.length,u=!1,l=setTimeout((()=>{u=!0;for(let e of a.values())e()}),n?.eoseSubTimeout||this.eoseSubTimeout);e.filter(((e,t,n)=>n.indexOf(e)===t)).forEach((async e=>{let n;try{n=await this.ensureRelay(e)}catch(e){return void f()}if(!n)return;let d=n.sub(t,o);function f(){if(c--,0===c){clearTimeout(l);for(let e of a.values())e()}}d.on("event",(e=>{r.add(e.id);for(let t of s.values())t(e)})),d.on("eose",(()=>{u||f()})),i.push(d)}));let d={sub:(e,t)=>(i.forEach((n=>n.sub(e,t))),d),unsub(){i.forEach((e=>e.unsub()))},on(e,t){"event"===e?s.add(t):"eose"===e&&a.add(t)},off(e,t){"event"===e?s.delete(t):"eose"===e&&a.delete(t)},get events(){return W(d)}};return d}get(e,t,n){return new Promise((r=>{let o=this.sub(e,[t],n),i=setTimeout((()=>{o.unsub(),r(null)}),this.getTimeout);o.on("event",(e=>{r(e),clearTimeout(i),o.unsub()}))}))}list(e,t,n){return new Promise((r=>{let o=[],i=this.sub(e,t,n);i.on("event",(e=>{o.push(e)})),i.on("eose",(()=>{i.unsub(),r(o)}))}))}batchedList(e,t,n){return new Promise((r=>{this.batchedByKey[e]?this.batchedByKey[e].push({filters:n,relays:t,resolve:r,events:[]}):(this.batchedByKey[e]=[{filters:n,relays:t,resolve:r,events:[]}],setTimeout((()=>{Object.keys(this.batchedByKey).forEach((async e=>{const t=this.batchedByKey[e],n=[],r=[];t.forEach((e=>{n.push(...e.filters),r.push(...e.relays)}));const o=this.sub(r,[q(...n)]);o.on("event",(e=>{t.forEach((t=>U(t.filters,e)&&t.events.push(e)))})),o.on("eose",(()=>{o.unsub(),t.forEach((e=>e.resolve(e.events)))})),delete this.batchedByKey[e]}))}),this.batchInterval))}))}publish(e,t){return e.map((async e=>(await this.ensureRelay(e)).publish(t)))}seenOn(e){return Array.from(this._seenOn[e]?.values?.()||[])}},J={};c(J,{BECH32_REGEX:()=>ee,decode:()=>te,naddrEncode:()=>le,neventEncode:()=>ue,noteEncode:()=>ie,nprofileEncode:()=>ce,npubEncode:()=>oe,nrelayEncode:()=>de,nsecEncode:()=>re});var Y=n(8089),X=n(9187),Q=5e3,ee=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function te(e){let{prefix:t,words:n}=X.bech32.decode(e,Q),r=new Uint8Array(X.bech32.fromWords(n));switch(t){case"nprofile":{let e=ne(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for nprofile");if(32!==e[0][0].length)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:(0,Y.bytesToHex)(e[0][0]),relays:e[1]?e[1].map((e=>m.decode(e))):[]}}}case"nevent":{let e=ne(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for nevent");if(32!==e[0][0].length)throw new Error("TLV 0 should be 32 bytes");if(e[2]&&32!==e[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(e[3]&&4!==e[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:(0,Y.bytesToHex)(e[0][0]),relays:e[1]?e[1].map((e=>m.decode(e))):[],author:e[2]?.[0]?(0,Y.bytesToHex)(e[2][0]):void 0,kind:e[3]?.[0]?parseInt((0,Y.bytesToHex)(e[3][0]),16):void 0}}}case"naddr":{let e=ne(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for naddr");if(!e[2]?.[0])throw new Error("missing TLV 2 for naddr");if(32!==e[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(!e[3]?.[0])throw new Error("missing TLV 3 for naddr");if(4!==e[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:m.decode(e[0][0]),pubkey:(0,Y.bytesToHex)(e[2][0]),kind:parseInt((0,Y.bytesToHex)(e[3][0]),16),relays:e[1]?e[1].map((e=>m.decode(e))):[]}}}case"nrelay":{let e=ne(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:m.decode(e[0][0])}}case"nsec":case"npub":case"note":return{type:t,data:(0,Y.bytesToHex)(r)};default:throw new Error(`unknown prefix ${t}`)}}function ne(e){let t={},n=e;for(;n.length>0;){let e=n[0],r=n[1];if(!r)throw new Error(`malformed TLV ${e}`);let o=n.slice(2,2+r);if(n=n.slice(2+r),o.length<r)throw new Error(`not enough data to read on TLV ${e}`);t[e]=t[e]||[],t[e].push(o)}return t}function re(e){return ae("nsec",e)}function oe(e){return ae("npub",e)}function ie(e){return ae("note",e)}function se(e,t){let n=X.bech32.toWords(t);return X.bech32.encode(e,n,Q)}function ae(e,t){return se(e,(0,Y.hexToBytes)(t))}function ce(e){return se("nprofile",fe({0:[(0,Y.hexToBytes)(e.pubkey)],1:(e.relays||[]).map((e=>v.encode(e)))}))}function ue(e){let t;return null!=e.kind&&(t=function(e){const t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=255&e,t}(e.kind)),se("nevent",fe({0:[(0,Y.hexToBytes)(e.id)],1:(e.relays||[]).map((e=>v.encode(e))),2:e.author?[(0,Y.hexToBytes)(e.author)]:[],3:t?[new Uint8Array(t)]:[]}))}function le(e){let t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e.kind,!1),se("naddr",fe({0:[v.encode(e.identifier)],1:(e.relays||[]).map((e=>v.encode(e))),2:[(0,Y.hexToBytes)(e.pubkey)],3:[new Uint8Array(t)]}))}function de(e){return se("nrelay",fe({0:[v.encode(e)]}))}function fe(e){let t=[];return Object.entries(e).forEach((([e,n])=>{n.forEach((n=>{let r=new Uint8Array(n.length+2);r.set([parseInt(e)],0),r.set([n.length],1),r.set(n,2),t.push(r)}))})),(0,Y.concatBytes)(...t)}var he=/\bnostr:((note|npub|naddr|nevent|nprofile)1\w+)\b|#\[(\d+)\]/g;function pe(e){let t=[];for(let n of e.content.matchAll(he))if(n[2])try{let{type:e,data:r}=te(n[1]);switch(e){case"npub":t.push({text:n[0],profile:{pubkey:r,relays:[]}});break;case"nprofile":t.push({text:n[0],profile:r});break;case"note":t.push({text:n[0],event:{id:r,relays:[]}});break;case"nevent":t.push({text:n[0],event:r});break;case"naddr":t.push({text:n[0],address:r})}}catch(e){}else if(n[3]){let r=parseInt(n[3],10),o=e.tags[r];if(!o)continue;switch(o[0]){case"p":t.push({text:n[0],profile:{pubkey:o[1],relays:o[2]?[o[2]]:[]}});break;case"e":t.push({text:n[0],event:{id:o[1],relays:o[2]?[o[2]]:[]}});break;case"a":try{let[e,r,i]=o[1].split(":");t.push({text:n[0],address:{identifier:i,pubkey:r,kind:parseInt(e,10),relays:o[2]?[o[2]]:[]}})}catch(e){}}}return t}var ye={};c(ye,{decrypt:()=>we,encrypt:()=>ve});var be=n(8089),ge=n(3497),me=n(9187);async function ve(e,t,n){const r=_e(ge.secp256k1.getSharedSecret(e,"02"+t));let o=Uint8Array.from((0,be.randomBytes)(16)),i=v.encode(n),s=await crypto.subtle.importKey("raw",r,{name:"AES-CBC"},!1,["encrypt"]),a=await crypto.subtle.encrypt({name:"AES-CBC",iv:o},s,i);return`${me.base64.encode(new Uint8Array(a))}?iv=${me.base64.encode(new Uint8Array(o.buffer))}`}async function we(e,t,n){let[r,o]=n.split("?iv="),i=_e(ge.secp256k1.getSharedSecret(e,"02"+t)),s=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["decrypt"]),a=me.base64.decode(r),c=me.base64.decode(o),u=await crypto.subtle.decrypt({name:"AES-CBC",iv:c},s,a);return m.decode(u)}function _e(e){return e.slice(1,33)}"undefined"!=typeof crypto&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle);var Ee={};c(Ee,{NIP05_REGEX:()=>ke,queryProfile:()=>Se,searchDomain:()=>Oe,useFetchImplementation:()=>Be});var xe,ke=/^(?:([\w.+-]+)@)?([\w.-]+)$/;try{xe=fetch}catch{}function Be(e){xe=e}async function Oe(e,t=""){try{return(await(await xe(`https://${e}/.well-known/nostr.json?name=${t}`)).json()).names}catch(e){return{}}}async function Se(e){const t=e.match(ke);if(!t)return null;const[n,r="_",o]=t;try{const e=await xe(`https://${o}/.well-known/nostr.json?name=${r}`),{names:t,relays:n}=function(e){const t={names:{}};for(const[n,r]of Object.entries(e.names))"string"==typeof n&&"string"==typeof r&&(t.names[n]=r);if(e.relays){t.relays={};for(const[n,r]of Object.entries(e.relays))"string"==typeof n&&Array.isArray(r)&&(t.relays[n]=r.filter((e=>"string"==typeof e)))}return t}(await e.json()),i=t[r];return i?{pubkey:i,relays:n?.[i]}:null}catch(e){return null}}var Ae={};c(Ae,{generateSeedWords:()=>Pe,privateKeyFromSeedWords:()=>Le,validateWords:()=>He});var Ie=n(8089),Te=n(1083),Ce=n(7286),je=n(1869);function Le(e,t){let n=je.HDKey.fromMasterSeed((0,Ce.mnemonicToSeedSync)(e,t)).derive("m/44'/1237'/0'/0/0").privateKey;if(!n)throw new Error("could not derive private key");return(0,Ie.bytesToHex)(n)}function Pe(){return(0,Ce.generateMnemonic)(Te.wordlist)}function He(e){return(0,Ce.validateMnemonic)(e,Te.wordlist)}var Ne={};function Ue(e){const t={reply:void 0,root:void 0,mentions:[],profiles:[]},n=[];for(const r of e.tags)"e"===r[0]&&r[1]&&n.push(r),"p"===r[0]&&r[1]&&t.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let e=0;e<n.length;e++){const r=n[e],[o,i,s,a]=r,c={id:i,relays:s?[s]:[]},u=0===e,l=e===n.length-1;"root"!==a?"reply"!==a?"mention"!==a?u?t.root=c:l?t.reply=c:t.mentions.push(c):t.mentions.push(c):t.reply=c:t.root=c}return t}c(Ne,{parse:()=>Ue});var qe={};function Me(e){let t=0;for(let n=0;n<e.length;n++){const r=parseInt(e[n],16);if(0!==r){t+=Math.clz32(r)-28;break}t+=4}return t}function Re(e,t){let n=0;const r=e,o=["nonce",n.toString(),t.toString()];for(r.tags.push(o);;){const e=Math.floor((new Date).getTime()/1e3);if(e!==r.created_at&&(n=0,r.created_at=e),o[1]=(++n).toString(),r.id=T(r),Me(r.id)>=t)break}return r}c(qe,{getPow:()=>Me,minePow:()=>Re});var De={};function Fe(e,t,n,r){return A({kind:6,tags:[...e.tags??[],["e",t.id,n],["p",t.pubkey]],content:""===e.content?"":JSON.stringify(t),created_at:e.created_at},r)}function ze(e){if(6!==e.kind)return;let t,n;for(let r=e.tags.length-1;r>=0&&(void 0===t||void 0===n);r--){const o=e.tags[r];o.length>=2&&("e"===o[0]&&void 0===t?t=o:"p"===o[0]&&void 0===n&&(n=o))}return void 0!==t?{id:t[1],relays:[t[2],n?.[2]].filter((e=>"string"==typeof e)),author:n?.[1]}:void 0}function Ke(e,{skipVerification:t}={}){const n=ze(e);if(void 0===n||""===e.content)return;let r;try{r=JSON.parse(e.content)}catch(e){return}return r.id===n.id&&(t||L(r))?r:void 0}c(De,{finishRepostEvent:()=>Fe,getRepostedEvent:()=>Ke,getRepostedEventPointer:()=>ze});var $e={};c($e,{NOSTR_URI_REGEX:()=>Ve,parse:()=>We,test:()=>Ge});var Ve=new RegExp(`nostr:(${ee.source})`);function Ge(e){return"string"==typeof e&&new RegExp(`^${Ve.source}$`).test(e)}function We(e){const t=e.match(new RegExp(`^${Ve.source}$`));if(!t)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:t[0],value:t[1],decoded:te(t[1])}}var Ze={};function Je(e,t,n){const r=t.tags.filter((e=>e.length>=2&&("e"===e[0]||"p"===e[0])));return A({...e,kind:7,tags:[...e.tags??[],...r,["e",t.id],["p",t.pubkey]],content:e.content??"+"},n)}function Ye(e){if(7!==e.kind)return;let t,n;for(let r=e.tags.length-1;r>=0&&(void 0===t||void 0===n);r--){const o=e.tags[r];o.length>=2&&("e"===o[0]&&void 0===t?t=o:"p"===o[0]&&void 0===n&&(n=o))}return void 0!==t&&void 0!==n?{id:t[1],relays:[t[2],n[2]].filter((e=>void 0!==e)),author:n[1]}:void 0}c(Ze,{finishReactionEvent:()=>Je,getReactedEventPointer:()=>Ye});var Xe={};c(Xe,{createDelegation:()=>nt,getDelegator:()=>rt});var Qe=n(3497),et=n(8089),tt=n(3061);function nt(e,t){let n=[];(t.kind||-1)>=0&&n.push(`kind=${t.kind}`),t.until&&n.push(`created_at<${t.until}`),t.since&&n.push(`created_at>${t.since}`);let r=n.join("&");if(""===r)throw new Error("refusing to create a delegation without any conditions");let o=(0,tt.sha256)(v.encode(`nostr:delegation:${t.pubkey}:${r}`)),i=(0,et.bytesToHex)(Qe.schnorr.sign(o,e));return{from:h(e),to:t.pubkey,cond:r,sig:i}}function rt(e){let t=e.tags.find((e=>"delegation"===e[0]&&e.length>=4));if(!t)return null;let n=t[1],r=t[2],o=t[3],i=r.split("&");for(let t=0;t<i.length;t++){let[n,r,o]=i[t].split(/\b/);if(("kind"!==n||"="!==r||e.kind!==parseInt(o))&&!("created_at"===n&&"<"===r&&e.created_at<parseInt(o)||"created_at"===n&&">"===r&&e.created_at>parseInt(o)))return null}let s=(0,tt.sha256)(v.encode(`nostr:delegation:${e.pubkey}:${r}`));return Qe.schnorr.verify(o,s,n)?n:null}var ot={};c(ot,{matchAll:()=>st,regex:()=>it,replaceAll:()=>at});var it=()=>new RegExp(`\\b${Ve.source}\\b`,"g");function*st(e){const t=e.matchAll(it());for(const e of t)try{const[t,n]=e;yield{uri:t,value:n,decoded:te(n),start:e.index,end:e.index+t.length}}catch(e){}}function at(e,t){return e.replaceAll(it(),((e,n)=>t({uri:e,value:n,decoded:te(n)})))}var ct={};c(ct,{channelCreateEvent:()=>lt,channelHideMessageEvent:()=>ht,channelMessageEvent:()=>ft,channelMetadataEvent:()=>dt,channelMuteUserEvent:()=>pt});var ut,lt=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return A({kind:40,tags:[...e.tags??[]],content:n,created_at:e.created_at},t)},dt=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return A({kind:41,tags:[["e",e.channel_create_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},ft=(e,t)=>{const n=[["e",e.channel_create_event_id,e.relay_url,"root"]];return e.reply_to_channel_message_event_id&&n.push(["e",e.reply_to_channel_message_event_id,e.relay_url,"reply"]),A({kind:42,tags:[...n,...e.tags??[]],content:e.content,created_at:e.created_at},t)},ht=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return A({kind:43,tags:[["e",e.channel_message_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},pt=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return A({kind:44,tags:[["p",e.pubkey_to_mute],...e.tags??[]],content:n,created_at:e.created_at},t)},yt={};c(yt,{useFetchImplementation:()=>bt,validateGithub:()=>gt});try{ut=fetch}catch{}function bt(e){ut=e}async function gt(e,t,n){try{return await(await ut(`https://gist.github.com/${t}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch(e){return!1}}var mt={};c(mt,{authenticate:()=>vt});var vt=async({challenge:e,relay:t,sign:n})=>{const r={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",t.url],["challenge",e]],content:""};return t.auth(await n(r))},wt={};c(wt,{decrypt:()=>Ct,encrypt:()=>Tt,utils:()=>It});var _t=n(7218),Et=n(8225),xt=n(3497),kt=n(4330),Bt=n(9569),Ot=n(3061),St=n(8089),At=n(9187),It={v2:{maxPlaintextSize:65408,minCiphertextSize:100,maxCiphertextSize:102400,getConversationKey:(e,t)=>xt.secp256k1.getSharedSecret(e,"02"+t).subarray(1,33),getMessageKeys(e,t){const n=(0,kt.hkdf)(Ot.sha256,e,t,"nip44-v2",76);return{encryption:n.subarray(0,32),nonce:n.subarray(32,44),auth:n.subarray(44,76)}},calcPadding(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("expected positive integer");if(e<=32)return 32;const t=1<<Math.floor(Math.log2(e-1))+1,n=t<=256?32:t/8;return n*(Math.floor((e-1)/n)+1)},pad(e){const t=v.encode(e),n=t.length;if(n<1||n>=It.v2.maxPlaintextSize)throw new Error("invalid plaintext length: must be between 1b and 64KB");const r=It.v2.calcPadding(n),o=new Uint8Array(r-n),i=new Uint8Array(2);return new DataView(i.buffer).setUint16(0,n),(0,St.concatBytes)(i,t,o)},unpad(e){const t=new DataView(e.buffer).getUint16(0),n=e.subarray(2,2+t);if(0===t||n.length!==t||e.length!==2+It.v2.calcPadding(t))throw new Error("invalid padding");return m.decode(n)}}};function Tt(e,t,n={}){const r=n.version??2;if(2!==r)throw new Error("unknown encryption version "+r);const o=n.salt??(0,St.randomBytes)(32);(0,Et.ensureBytes)(o,32);const i=It.v2.getMessageKeys(e,o),s=It.v2.pad(t),a=(0,_t.chacha20)(i.encryption,i.nonce,s),c=(0,Bt.hmac)(Ot.sha256,i.auth,a);return At.base64.encode((0,St.concatBytes)(new Uint8Array([r]),o,a,c))}function Ct(e,t){const n=It.v2;(0,Et.ensureBytes)(e,32);const r=t.length;if(r<n.minCiphertextSize||r>=n.maxCiphertextSize)throw new Error("invalid ciphertext length: "+r);if("#"===t[0])throw new Error("unknown encryption version");let o;try{o=At.base64.decode(t)}catch(e){throw new Error("invalid base64: "+e.message)}const i=o.subarray(0,1)[0];if(2!==i)throw new Error("unknown encryption version "+i);const s=o.subarray(1,33),a=o.subarray(33,-32),c=o.subarray(-32),u=n.getMessageKeys(e,s),l=(0,Bt.hmac)(Ot.sha256,u.auth,a);if(!(0,Et.equalBytes)(l,c))throw new Error("invalid MAC");const d=(0,_t.chacha20)(u.encryption,u.nonce,a);return n.unpad(d)}var jt={};function Lt(e){const{pathname:t,searchParams:n}=new URL(e),r=t,o=n.get("relay"),i=n.get("secret");if(!r||!o||!i)throw new Error("invalid connection string");return{pubkey:r,relay:o,secret:i}}async function Pt({pubkey:e,secret:t,invoice:n}){const r={method:"pay_invoice",params:{invoice:n}},o=await ve(t,e,JSON.stringify(r));return A({kind:23194,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",e]]},t)}c(jt,{makeNwcRequestEvent:()=>Pt,parseConnectionString:()=>Lt});var Ht={};c(Ht,{getZapEndpoint:()=>Mt,makeZapReceipt:()=>Ft,makeZapRequest:()=>Rt,useFetchImplementation:()=>qt,validateZapRequest:()=>Dt});var Nt,Ut=n(9187);try{Nt=fetch}catch{}function qt(e){Nt=e}async function Mt(e){try{let t="",{lud06:n,lud16:r}=JSON.parse(e.content);if(n){let{words:e}=Ut.bech32.decode(n,1e3),r=Ut.bech32.fromWords(e);t=m.decode(r)}else{if(!r)return null;{let[e,n]=r.split("@");t=`https://${n}/.well-known/lnurlp/${e}`}}let o=await Nt(t),i=await o.json();if(i.allowsNostr&&i.nostrPubkey)return i.callback}catch(e){}return null}function Rt({profile:e,event:t,amount:n,relays:r,comment:o=""}){if(!n)throw new Error("amount not given");if(!e)throw new Error("profile not given");let i={kind:9734,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",e],["amount",n.toString()],["relays",...r]]};return t&&i.tags.push(["e",t]),i}function Dt(e){let t;try{t=JSON.parse(e)}catch(e){return"Invalid zap request JSON."}if(!j(t))return"Zap request is not a valid Nostr event.";if(!L(t))return"Invalid signature on zap request.";let n=t.tags.find((([e,t])=>"p"===e&&t));if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=t.tags.find((([e,t])=>"e"===e&&t));return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":t.tags.find((([e,t])=>"relays"===e&&t))?null:"Zap request doesn't have a 'relays' tag."}function Ft({zapRequest:e,preimage:t,bolt11:n,paidAt:r}){let o=JSON.parse(e).tags.filter((([e])=>"e"===e||"p"===e||"a"===e)),i={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...o,["bolt11",n],["description",e]]};return t&&i.tags.push(["preimage",t]),i}var zt={};c(zt,{getToken:()=>Vt,unpackEventFromToken:()=>Wt,validateEvent:()=>Zt,validateToken:()=>Gt});var Kt=n(9187),$t="Nostr ";async function Vt(e,t,n,r=!1){if(!e||!t)throw new Error("Missing loginUrl or httpMethod");const o=S(27235);o.tags=[["u",e],["method",t]],o.created_at=Math.round((new Date).getTime()/1e3);const i=await n(o);return(r?$t:"")+Kt.base64.encode(v.encode(JSON.stringify(i)))}async function Gt(e,t,n){const r=await Wt(e).catch((e=>{throw e}));return await Zt(r,t,n).catch((e=>{throw e}))}async function Wt(e){if(!e)throw new Error("Missing token");e=e.replace($t,"");const t=m.decode(Kt.base64.decode(e));if(!t||0===t.length||!t.startsWith("{"))throw new Error("Invalid token");return JSON.parse(t)}async function Zt(e,t,n){if(!e)throw new Error("Invalid nostr event");if(!L(e))throw new Error("Invalid nostr event, signature invalid");if(27235!==e.kind)throw new Error("Invalid nostr event, kind invalid");if(!e.created_at)throw new Error("Invalid nostr event, created_at invalid");if(Math.round((new Date).getTime()/1e3)-e.created_at>60)throw new Error("Invalid nostr event, expired");const r=e.tags.find((e=>"u"===e[0]));if(1!==r?.length&&r?.[1]!==t)throw new Error("Invalid nostr event, url tag invalid");const o=e.tags.find((e=>"method"===e[0]));if(1!==o?.length&&o?.[1].toLowerCase()!==n.toLowerCase())throw new Error("Invalid nostr event, method tag invalid");return!0}},8519:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(7340);n(6445),function(){const e=["wss://relay-jp.nostr.wirednet.jp","wss://yabu.me","wss://r.kojira.io","wss://nrelay-jp.c-stellar.net","wss://nostr.holybea.com"],t=["wss://nostr-relay.nokotaro.com","wss://relay.nostr.wirednet.jp","wss://relay.damus.io","wss://nos.lol"],n=["wss://relay-jp.nostr.wirednet.jp","wss://yabu.me","wss://r.kojira.io","wss://nrelay-jp.c-stellar.net","wss://nostr.holybea.com"],i=[9801,9821],s=50,a="https://nostx.shino3.net/",c="http://localhost:9801",u="object"==typeof window,l=new Intl.DateTimeFormat("ja-jp",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),d=(0,o.generatePrivateKey)();(0,o.getPublicKey)(d);let f,h=[],p=[],y=[];if(u){function B(e){y=e[0],h=e[1],p=e[2];const t=document.getElementById("sstp-target"),n=document.getElementById("bottle-ifghost"),r=t.childElementCount;for(let e=0;e<r;e++)t.remove(0),n.remove(0);for(let e=0;e<h.length;e++){const r=document.createElement("option");r.setAttribute("value",h[e]),r.appendChild(document.createTextNode(h[e])),t.appendChild(r);const o=document.createElement("option");o.setAttribute("value",h[e]+","+p[e]),o.appendChild(document.createTextNode(h[e]+","+p[e])),n.appendChild(o)}document.getElementById("bottle-send").disabled=0==h.length}S(),document.getElementById("refresh").addEventListener("click",(function(){S()}));const O=document.getElementById("bottle-send");function S(){return r(this,void 0,void 0,(function*(){const e=(yield m(c+"/api/sstp/v1",["EXECUTE SSTP/1.1","Charset: UTF-8","SecurityLevel: external","Command: GetFMO","",""].join("\n"))).split("\r\n"),t=[],n=[],r=[];for(let o=0;o<e.length;o++)if(e[o].indexOf(".hwnd"+String.fromCharCode(1))>=0){const n=e[o].split(String.fromCharCode(1))[1].replace("\r","");t.push(n)}else if(e[o].indexOf(".name"+String.fromCharCode(1))>=0){const t=e[o].split(String.fromCharCode(1))[1].replace("\r","");n.push(t)}else if(e[o].indexOf(".keroname"+String.fromCharCode(1))>=0){const t=e[o].split(String.fromCharCode(1))[1].replace("\r","");r.push(t)}B([t,n,r])}))}O.addEventListener("click",(function(e){return r(this,void 0,void 0,(function*(){const e=document.getElementById("bottle-script");if(null==e)return;const t=e.value.replace(/\n/g,"");if(""==t)return;O.disabled=!0;const r={Script:t,IfGhost:document.getElementById("bottle-ifghost").value},i={kind:Number(document.getElementById("bottle-kind").value),pubkey:"",created_at:Math.floor(Date.now()/1e3),tags:[],content:JSON.stringify(r)};let s;s=document.getElementById("use-nip-07").checked&&window.nostr?yield window.nostr.signEvent(i):(0,o.finishEvent)(i,d),yield v.publish(n,s),e.value="",O.disabled=!1}))})),document.querySelectorAll('.tabs > input[type="radio"]').forEach((t=>{t.addEventListener("change",(()=>{if(t.checked){const r=Number(document.getElementById("bottle-kind").value);"global"==t.id||"following"==t.id?(f.unsub(),f=x(e)):"bottle"==t.id&&(f.unsub(),f=k(n,r))}}))})),document.getElementById("bottle-kind").addEventListener("change",(()=>{const e=Number(document.getElementById("bottle-kind").value);f.unsub(),f=k(n,e)})),window.addEventListener("load",(()=>{const e=document.getElementById("use-nip-07"),t=document.getElementById("npub-nip-07"),n=document.getElementById("login-with-nip-07");window.nostr&&window.nostr.getPublicKey?(n.addEventListener("change",(e=>r(this,void 0,void 0,(function*(){var e;const t=document.getElementById("pubkey");if(n.checked){const n=yield null===(e=window.nostr)||void 0===e?void 0:e.getPublicKey();void 0!==n&&(t.value=o.nip19.npubEncode(n),t.dispatchEvent(new Event("change")))}else t.value="",t.dispatchEvent(new Event("change"))})))),e.addEventListener("change",(()=>r(this,void 0,void 0,(function*(){e.checked?yield function(){var e;return r(this,void 0,void 0,(function*(){const n=yield null===(e=window.nostr)||void 0===e?void 0:e.getPublicKey();if(void 0!==n){t.value=o.nip19.npubEncode(n);const e={kinds:[0],authors:[n],limit:1},r=[];Array.from(document.getElementById("enabled-relay").options).forEach((e=>{r.push(e.value)})),Array.from(document.getElementById("following-relay").options).forEach((e=>{r.push(e.value)})),Array.from(document.getElementById("bottle-relay").options).forEach((e=>{r.push(e.value)}));const i=v.sub(r,[e]);i.on("event",(e=>{const t=JSON.parse(e.content),r=document.getElementById("bottle-profile-dt");if(r.innerHTML="",null!=t.picture){const e=document.createElement("img");e.src=t.picture,e.alt=t.name,e.width=s,e.height=s,r.appendChild(e)}r.appendChild(document.createTextNode(t.display_name));const i=document.createElement("a");i.setAttribute("href",a+o.nip19.npubEncode(e.pubkey)),i.textContent="@"+t.name,r.appendChild(i);const c=document.getElementById("bottle-profile-dd");c.innerHTML="",c.appendChild(document.createTextNode(t.about)),null!=t.picture&&document.querySelectorAll("#bottle-tl > dt").forEach((e=>{if(e.dataset.npub==o.nip19.npubEncode(n)){const n=document.createElement("img");n.src=t.picture,n.alt=t.name,n.width=s,n.height=s,e.appendChild(n)}}))})),i.on("eose",(()=>{i.unsub()}))}}))}():(t.value="",document.getElementById("bottle-profile-dt").innerHTML="",document.getElementById("bottle-profile-dd").innerHTML="",document.querySelectorAll("#bottle-tl > dt > img").forEach((e=>{e.remove()})))}))))):(n.disabled=!0,e.disabled=!0,t.disabled=!0)}))}function b(e,t,n,o,i){return r(this,void 0,void 0,(function*(){if(!document.getElementById("sstp-enable").checked)return;const r=document.getElementById("sstp-target").selectedIndex,s=y[r],a="\\0"+e.replace(/\\/g,"\\\\").replace(/\n/g,"\\n")+"\\e";n?yield g([s,a,t,e.replace(/\n/g,"\\n"),n,o,i]):yield g([s,e.replace(/\n/g,"\\n"),t])}))}function g(e){return r(this,void 0,void 0,(function*(){const t=e[0],n=e[1],r=e[2],o=["NOTIFY SSTP/1.1","Charset: UTF-8","SecurityLevel: external","Sender: angolmois","Event: OnNostr","Option: nobreak",`ReceiverGhostHWnd: ${t}`];r&&o.push(`IfGhost: ${r}`),o.push(`Script: ${n}`),o.push("Reference0: "+(r?"Nostr-Bottle/0.1":"Nostr/0.1"));for(let t=3;t<e.length;t++)o.push(`Reference${t-2}: ${e[t]}`);o.push(""),o.push("");const i=yield m(c+"/api/sstp/v1",o.join("\n"));return console.log(o.join("\n"),"\n----------\n",i,"\n----------\n"),i}))}function m(e="",t=""){return r(this,void 0,void 0,(function*(){return(yield fetch(e,{method:"POST",headers:{"Content-Type":"text/plain"},body:t})).text()}))}const v=new o.SimplePool;if(f=x(e),u){!function(e,t,n,r){var o,i;const s=document.getElementById("enabled-relay");e.forEach((e=>{const t=document.createElement("option");t.setAttribute("value",e),t.appendChild(document.createTextNode(e)),null==s||s.appendChild(t)}));const a=document.getElementById("disabled-relay");t.forEach((e=>{const t=document.createElement("option");t.setAttribute("value",e),t.appendChild(document.createTextNode(e)),null==a||a.appendChild(t)}));const c=document.getElementById("bottle-relay");n.forEach((e=>{const t=document.createElement("option");t.setAttribute("value",e),t.appendChild(document.createTextNode(e)),null==c||c.appendChild(t)}));const u=document.getElementById("bottle-kind");function l(e,t){const n=document.getElementById(e);if(!(n.selectedIndex>=0))return;const r=n.options[n.selectedIndex].value,o=document.getElementById(t),i=document.createElement("option");i.setAttribute("value",r),i.appendChild(document.createTextNode(r)),o.appendChild(i),n.remove(n.selectedIndex);const s=[];Array.from(document.getElementById("enabled-relay").options).forEach((e=>{s.push(e.value)})),f.unsub(),f=x(s)}r.forEach((e=>{const t=document.createElement("option");t.setAttribute("value",e.toString()),t.appendChild(document.createTextNode(e.toString())),9801==e&&(t.selected=!0),null==u||u.appendChild(t)})),null===(o=document.getElementById("remove"))||void 0===o||o.addEventListener("click",(()=>l("enabled-relay","disabled-relay"))),null===(i=document.getElementById("add"))||void 0===i||i.addEventListener("click",(()=>l("disabled-relay","enabled-relay")))}(e,t,n,i);const A=document.getElementById("pubkey");let I;A.addEventListener("change",(()=>{const{type:e,data:t}=o.nip19.decode(A.value);let n="";if("string"!=typeof t)return;n=t;const i={kinds:[3],authors:[n],limit:1},c=[];Array.from(document.getElementById("enabled-relay").options).forEach((e=>{c.push(e.value)})),Array.from(document.getElementById("following-relay").options).forEach((e=>{c.push(e.value)}));const u=v.sub(Array.from(new Set(c)),[i]);let l=!1;u.on("event",(e=>r(this,void 0,void 0,(function*(){if(l)return;let t;const r=[];try{t=JSON.parse(e.content)}catch(t){return console.log(t),void console.log(e)}l=!0;const i=[];e.tags.forEach((e=>{"p"==e[0]&&i.push(e[1])}));const c=document.getElementById("following-relay");Array.from(c.options).forEach((e=>{c.remove(0)})),Object.keys(t).forEach((e=>{r.push(e);const t=document.createElement("option");t.textContent=e,c.add(t)}));const u=r.map((e=>{try{v.ensureRelay(e)}catch(e){console.log("ensureRelay error: ",e)}})),d=(yield Promise.all(u),{kinds:[0],authors:[n],limit:1}),f=v.sub(r,[d]);f.on("event",(e=>{const t=JSON.parse(e.content),n=document.getElementById("profile-dt");if(n.innerHTML="",null!=t.picture){const e=document.createElement("img");e.src=t.picture,e.alt=t.name,e.width=s,e.height=s,n.appendChild(e)}n.appendChild(document.createTextNode(t.display_name));const r=document.createElement("a");r.setAttribute("href",a+o.nip19.npubEncode(e.pubkey)),r.textContent="@"+t.name,n.appendChild(r);const i=document.getElementById("profile-dd");i.innerHTML="",i.appendChild(document.createTextNode(t.about))})),f.on("eose",(()=>{f.unsub()})),i.push(n);const h={kinds:[1],authors:i,since:Math.floor(Date.now()/1e3)-1800,limit:20},p=v.sub(r,[h]);document.getElementById("following-tl").innerHTML="",p.on("event",(e=>{E("following",r,e)})),p.on("eose",(()=>{})),I&&I.unsub(),I=p})))),u.on("eose",(()=>{u.unsub()}))}))}const w={},_={};function E(e,t,n){const r={kinds:[0],authors:[n.pubkey]},i=v.sub(t,[r]);let c=!1;i.on("event",(t=>{if(!n.id)return;if(c)return;c=!0;const r=JSON.parse(t.content),i=document.createElement("dt");if(null!=r.picture){const e=document.createElement("img");e.src=r.picture,e.alt=r.name,e.width=s,e.height=s,i.appendChild(e)}i.appendChild(document.createTextNode(r.display_name));const u=document.createElement("a");u.setAttribute("href",a+o.nip19.npubEncode(n.pubkey)),u.textContent="@"+r.name,i.appendChild(u);const d=document.createElement("time");d.textContent=l.format(new Date(1e3*n.created_at)),i.appendChild(d),i.setAttribute("id",e+"-"+o.nip19.noteEncode(n.id)),i.setAttribute("data-timestamp",n.created_at.toString());const f=document.createElement("dd");let h=!1,p=!1,y="";const g=[];n.tags.forEach((e=>{"e"==e[0]?(h=!0,y=e[1],g.push(o.nip19.noteEncode(e[1]))):"p"==e[0]&&(p=!0,g.push(o.nip19.npubEncode(e[1])))})),h&&null!=_[w[y]]?(f.appendChild(document.createTextNode("@"+_[w[y]])),f.appendChild(document.createElement("br"))):p&&null!=_[""]&&(f.appendChild(document.createTextNode("@"+_[""])),f.appendChild(document.createElement("br"))),n.content.split(/(#\[\d+\])/).forEach((e=>{const t=e.match(/#\[(\d+)\]/);if(t){const n=document.createElement("a");n.setAttribute("href","#"+o.nip19.npubEncode(g[Number(t[1])])),n.textContent=e,f.appendChild(n)}else f.appendChild(document.createTextNode(e))}));const m=document.createElement("button");m.textContent="Send SSTP",m.addEventListener("click",(function(e){b(n.content,"",r.name?r.name:"",r.display_name?r.display_name:"",r.picture?r.picture:"")})),i.appendChild(m);const E=document.createElement("button");E.textContent="この人でログインする",E.addEventListener("click",(function(e){document.getElementById("login-with-nip-07").checked=!1;const t=document.getElementById("pubkey");t.value=o.nip19.npubEncode(n.pubkey),t.dispatchEvent(new Event("change")),document.getElementById("following").checked=!0})),i.appendChild(E);const x=document.createElement("ul");x.className="relay",v.seenOn(n.id).forEach((e=>{const t=document.createElement("li");t.textContent=e,x.appendChild(t)})),f.appendChild(x);const k=document.getElementById(e+"-tl");if(r.name in _||(_[n.pubkey]=r.name),n.id in w||(w[n.id]=n.pubkey),document.getElementById(e+"-"+o.nip19.noteEncode(n.id)))return;const B=k.querySelectorAll("dt");let O=!1,S=!1;if(B.length>0){for(let e=0;e<B.length;e++)if(Number(B[e].dataset.timestamp)<n.created_at){k.insertBefore(f,B[e]),k.insertBefore(i,f),O=!0,0==e&&(S=!0);break}O||(k.appendChild(i),k.appendChild(f),O=!0)}else S=!0,k.prepend(f),k.prepend(i);document.getElementById(e).checked&&S&&b(n.content,"",r.name?r.name:"",r.display_name?r.display_name:"",r.picture?r.picture:"")})),i.on("eose",(()=>{i.unsub()}))}function x(e){const t={kinds:[1],since:Math.floor(Date.now()/1e3)-1800,limit:20},n=v.sub(e,[t]);return u&&(document.getElementById("global-tl").innerHTML=""),n.on("event",(t=>{E("global",e,t)})),n}function k(e,t){const n={kinds:[t],limit:20},r=v.sub(e,[n]);return u&&(document.getElementById("bottle-tl").innerHTML=""),r.on("event",(e=>{!function(e,t){if(!t.id)return;const n=JSON.parse(t.content),r=n.IfGhost,i=n.Script,s=document.createElement("dt");s.appendChild(document.createTextNode(r));const a=document.createElement("time");a.textContent=l.format(new Date(1e3*t.created_at)),s.appendChild(a),s.setAttribute("id",e+"-"+o.nip19.noteEncode(t.id)),s.setAttribute("data-timestamp",t.created_at.toString()),s.setAttribute("data-npub",o.nip19.npubEncode(t.pubkey)),o.nip19.npubEncode(t.pubkey)==document.getElementById("npub-nip-07").value&&document.querySelectorAll("#bottle-profile-dt > img").forEach((e=>{s.appendChild(e.cloneNode(!1))}));const c=document.createElement("dd"),u=document.createElement("button");u.textContent="Send SSTP",u.addEventListener("click",(function(e){b(i,r)})),s.appendChild(u),c.appendChild(document.createTextNode(i));const d=document.createElement("ul");d.className="relay",v.seenOn(t.id).forEach((e=>{const t=document.createElement("li");t.textContent=e,d.appendChild(t)})),c.appendChild(d);const f=document.getElementById(e+"-tl");if(document.getElementById(e+"-"+o.nip19.noteEncode(t.id)))return;const h=f.querySelectorAll("dt");let p=!1,y=!1;if(h.length>0){for(let e=0;e<h.length;e++)if(Number(h[e].dataset.timestamp)<t.created_at){f.insertBefore(c,h[e]),f.insertBefore(s,c),p=!0,0==e&&(y=!0);break}p||(f.appendChild(s),f.appendChild(c),p=!0)}else y=!0,f.prepend(c),f.prepend(s);document.getElementById(e).checked&&y&&b(i,r)}("bottle",e)})),r.on("eose",(()=>{})),r}}()},2278:function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Container=void 0;var o=n(7428),i=function(){function e(){}return e.prototype.empty=function(){return 0===this.size()},e.prototype.rbegin=function(){return this.end().reverse()},e.prototype.rend=function(){return this.begin().reverse()},e.prototype[Symbol.iterator]=function(){return new o.ForOfAdaptor(this.begin(),this.end())},e.prototype.toJSON=function(){var e,t,n=[];try{for(var o=r(this),i=o.next();!i.done;i=o.next()){var s=i.value;n.push(s)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n},e}();t.Container=i},9683:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.MapContainer=void 0;var i=n(2278),s=n(9932),a=function(e){function t(t){var n=e.call(this)||this;return n.data_=t(n),n}return o(t,e),t.prototype.assign=function(e,t){this.clear(),this.insert(e,t)},t.prototype.clear=function(){this.data_.clear()},t.prototype.begin=function(){return this.data_.begin()},t.prototype.end=function(){return this.data_.end()},t.prototype.has=function(e){return!this.find(e).equals(this.end())},t.prototype.size=function(){return this.data_.size()},t.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=new s.NativeArrayIterator(e,0),r=new s.NativeArrayIterator(e,e.length);return this.insert(n,r),this.size()},t.prototype.insert=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length?this.emplace(e[0].first,e[0].second):e[0].next instanceof Function&&e[1].next instanceof Function?this._Insert_by_range(e[0],e[1]):this.emplace_hint(e[0],e[1].first,e[1].second)},t.prototype.erase=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1!==e.length||e[0]instanceof this.end().constructor!=0&&e[0].source()===this?1===e.length?this._Erase_by_range(e[0]):this._Erase_by_range(e[0],e[1]):this._Erase_by_key(e[0])},t.prototype._Erase_by_range=function(e,t){void 0===t&&(t=e.next());var n=this.data_.erase(e,t);return this._Handle_erase(e,t),n},t}(i.Container);t.MapContainer=a},6639:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.SetContainer=void 0;var i=n(2278),s=n(9932),a=function(e){function t(t){var n=e.call(this)||this;return n.data_=t(n),n}return o(t,e),t.prototype.assign=function(e,t){this.clear(),this.insert(e,t)},t.prototype.clear=function(){this.data_.clear()},t.prototype.begin=function(){return this.data_.begin()},t.prototype.end=function(){return this.data_.end()},t.prototype.has=function(e){return!this.find(e).equals(this.end())},t.prototype.size=function(){return this.data_.size()},t.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return this.size();var n=new s.NativeArrayIterator(e,0),r=new s.NativeArrayIterator(e,e.length);return this._Insert_by_range(n,r),this.size()},t.prototype.insert=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length?this._Insert_by_key(e[0]):e[0].next instanceof Function&&e[1].next instanceof Function?this._Insert_by_range(e[0],e[1]):this._Insert_by_hint(e[0],e[1])},t.prototype.erase=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1!==e.length||e[0]instanceof this.end().constructor&&e[0].source()===this?1===e.length?this._Erase_by_range(e[0]):this._Erase_by_range(e[0],e[1]):this._Erase_by_val(e[0])},t.prototype._Erase_by_range=function(e,t){void 0===t&&(t=e.next());var n=this.data_.erase(e,t);return this._Handle_erase(e,t),n},t}(i.Container);t.SetContainer=a},1571:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.UniqueMap=void 0;var a=n(9683),c=n(1566),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.count=function(e){return this.find(e).equals(this.end())?0:1},t.prototype.get=function(e){var t=this.find(e);if(!0===t.equals(this.end()))throw c.ErrorGenerator.key_nout_found(this,"get",e);return t.second},t.prototype.take=function(e,t){var n=this.find(e);return n.equals(this.end())?this.emplace(e,t()).first.second:n.second},t.prototype.set=function(e,t){this.insert_or_assign(e,t)},t.prototype.insert=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.insert.apply(this,s([],i(t),!1))},t.prototype._Insert_by_range=function(e,t){for(var n=e;!n.equals(t);n=n.next())this.emplace(n.value.first,n.value.second)},t.prototype.insert_or_assign=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 2===e.length?this._Insert_or_assign_with_key_value(e[0],e[1]):3===e.length?this._Insert_or_assign_with_hint(e[0],e[1],e[2]):void 0},t.prototype._Insert_or_assign_with_key_value=function(e,t){var n=this.emplace(e,t);return!1===n.second&&(n.first.second=t),n},t.prototype._Insert_or_assign_with_hint=function(e,t,n){var r=this.emplace_hint(e,t,n);return r.second!==n&&(r.second=n),r},t.prototype.extract=function(e){return e instanceof this.end().constructor?this._Extract_by_iterator(e):this._Extract_by_key(e)},t.prototype._Extract_by_key=function(e){var t=this.find(e);if(!0===t.equals(this.end()))throw c.ErrorGenerator.key_nout_found(this,"extract",e);var n=t.value;return this._Erase_by_range(t),n},t.prototype._Extract_by_iterator=function(e){return!0===e.equals(this.end())?this.end():(this._Erase_by_range(e),e)},t.prototype._Erase_by_key=function(e){var t=this.find(e);return!0===t.equals(this.end())?0:(this._Erase_by_range(t),1)},t.prototype.merge=function(e){for(var t=e.begin();!t.equals(e.end());)!1===this.has(t.first)?(this.insert(t.value),t=e.erase(t)):t=t.next()},t}(a.MapContainer);t.UniqueMap=u},2570:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.UniqueSet=void 0;var a=n(6639),c=n(1566),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.count=function(e){return this.find(e).equals(this.end())?0:1},t.prototype.insert=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.insert.apply(this,s([],i(t),!1))},t.prototype._Insert_by_range=function(e,t){for(;!e.equals(t);e=e.next())this._Insert_by_key(e.value)},t.prototype.extract=function(e){return e instanceof this.end().constructor?this._Extract_by_iterator(e):this._Extract_by_val(e)},t.prototype._Extract_by_val=function(e){var t=this.find(e);if(!0===t.equals(this.end()))throw c.ErrorGenerator.key_nout_found(this,"extract",e);return this._Erase_by_range(t),e},t.prototype._Extract_by_iterator=function(e){return!0===e.equals(this.end())||!1===this.has(e.value)?this.end():(this._Erase_by_range(e),e)},t.prototype._Erase_by_val=function(e){var t=this.find(e);return!0===t.equals(this.end())?0:(this._Erase_by_range(t),1)},t.prototype.merge=function(e){for(var t=e.begin();!t.equals(e.end());)!1===this.has(t.value)?(this.insert(t.value),t=e.erase(t)):t=t.next()},t}(a.SetContainer);t.UniqueSet=u},1266:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.HashMap=void 0;var a=n(1571),c=n(4970),u=n(9753),l=n(3136),d=n(9430),f=n(5351),h=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=e.call(this,(function(e){return new u.MapElementList(e)}))||this;return c.IHashContainer.construct.apply(c.IHashContainer,s([o,t,function(e,t){o.buckets_=new l.MapHashBuckets(o,e,t)}],i(n),!1)),o}return o(t,e),t.prototype.clear=function(){this.buckets_.clear(),e.prototype.clear.call(this)},t.prototype.swap=function(e){var t,n;t=i([e.data_,this.data_],2),this.data_=t[0],e.data_=t[1],u.MapElementList._Swap_associative(this.data_,e.data_),l.MapHashBuckets._Swap_source(this.buckets_,e.buckets_),n=i([e.buckets_,this.buckets_],2),this.buckets_=n[0],e.buckets_=n[1]},t.prototype.find=function(e){return this.buckets_.find(e)},t.prototype.begin=function(t){return void 0===t&&(t=null),null===t?e.prototype.begin.call(this):this.buckets_.at(t)[0]},t.prototype.end=function(t){if(void 0===t&&(t=null),null===t)return e.prototype.end.call(this);var n=this.buckets_.at(t);return n[n.length-1].next()},t.prototype.rbegin=function(e){return void 0===e&&(e=null),this.end(e).reverse()},t.prototype.rend=function(e){return void 0===e&&(e=null),this.begin(e).reverse()},t.prototype.bucket_count=function(){return this.buckets_.length()},t.prototype.bucket_size=function(e){return this.buckets_.at(e).length},t.prototype.load_factor=function(){return this.buckets_.load_factor()},t.prototype.hash_function=function(){return this.buckets_.hash_function()},t.prototype.key_eq=function(){return this.buckets_.key_eq()},t.prototype.bucket=function(e){return this.hash_function()(e)%this.buckets_.length()},t.prototype.max_load_factor=function(e){return void 0===e&&(e=null),this.buckets_.max_load_factor(e)},t.prototype.reserve=function(e){this.buckets_.reserve(e)},t.prototype.rehash=function(e){this.buckets_.rehash(e)},t.prototype.emplace=function(e,t){var n=this.find(e);return!1===n.equals(this.end())?new f.Pair(n,!1):(this.data_.push(new d.Entry(e,t)),n=n.prev(),this._Handle_insert(n,n.next()),new f.Pair(n,!0))},t.prototype.emplace_hint=function(e,t,n){var r=this.find(t);return!0===r.equals(this.end())&&(r=this.data_.insert(e,new d.Entry(t,n)),this._Handle_insert(r,r.next())),r},t.prototype._Handle_insert=function(e,t){for(;!e.equals(t);e=e.next())this.buckets_.insert(e)},t.prototype._Handle_erase=function(e,t){for(;!e.equals(t);e=e.next())this.buckets_.erase(e)},t}(a.UniqueMap);t.HashMap=h,function(e){e.Iterator=u.MapElementList.Iterator,e.ReverseIterator=u.MapElementList.ReverseIterator}(h=t.HashMap||(t.HashMap={})),t.HashMap=h},5017:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.HashSet=void 0;var a=n(2570),c=n(4970),u=n(7976),l=n(6449),d=n(5351),f=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=e.call(this,(function(e){return new u.SetElementList(e)}))||this;return c.IHashContainer.construct.apply(c.IHashContainer,s([o,t,function(e,t){o.buckets_=new l.SetHashBuckets(o,e,t)}],i(n),!1)),o}return o(t,e),t.prototype.clear=function(){this.buckets_.clear(),e.prototype.clear.call(this)},t.prototype.swap=function(e){var t,n;t=i([e.data_,this.data_],2),this.data_=t[0],e.data_=t[1],u.SetElementList._Swap_associative(this.data_,e.data_),l.SetHashBuckets._Swap_source(this.buckets_,e.buckets_),n=i([e.buckets_,this.buckets_],2),this.buckets_=n[0],e.buckets_=n[1]},t.prototype.find=function(e){return this.buckets_.find(e)},t.prototype.begin=function(t){return void 0===t&&(t=null),null===t?e.prototype.begin.call(this):this.buckets_.at(t)[0]},t.prototype.end=function(t){if(void 0===t&&(t=null),null===t)return e.prototype.end.call(this);var n=this.buckets_.at(t);return n[n.length-1].next()},t.prototype.rbegin=function(e){return void 0===e&&(e=null),this.end(e).reverse()},t.prototype.rend=function(e){return void 0===e&&(e=null),this.begin(e).reverse()},t.prototype.bucket_count=function(){return this.buckets_.length()},t.prototype.bucket_size=function(e){return this.buckets_.at(e).length},t.prototype.load_factor=function(){return this.buckets_.load_factor()},t.prototype.hash_function=function(){return this.buckets_.hash_function()},t.prototype.key_eq=function(){return this.buckets_.key_eq()},t.prototype.bucket=function(e){return this.hash_function()(e)%this.buckets_.length()},t.prototype.max_load_factor=function(e){return void 0===e&&(e=null),this.buckets_.max_load_factor(e)},t.prototype.reserve=function(e){this.buckets_.reserve(e)},t.prototype.rehash=function(e){this.buckets_.rehash(e)},t.prototype._Insert_by_key=function(e){var t=this.find(e);return!1===t.equals(this.end())?new d.Pair(t,!1):(this.data_.push(e),t=t.prev(),this._Handle_insert(t,t.next()),new d.Pair(t,!0))},t.prototype._Insert_by_hint=function(e,t){var n=this.find(t);return!0===n.equals(this.end())&&(n=this.data_.insert(e,t),this._Handle_insert(n,n.next())),n},t.prototype._Handle_insert=function(e,t){for(;!e.equals(t);e=e.next())this.buckets_.insert(e)},t.prototype._Handle_erase=function(e,t){for(;!e.equals(t);e=e.next())this.buckets_.erase(e)},t}(a.UniqueSet);t.HashSet=f,function(e){e.Iterator=u.SetElementList.Iterator,e.ReverseIterator=u.SetElementList.ReverseIterator}(f=t.HashSet||(t.HashSet={})),t.HashSet=f},269:function(e,t){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Exception=void 0;var o=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this,o=n.prototype;return Object.setPrototypeOf?Object.setPrototypeOf(r,o):r.__proto__=o,r}return r(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return this.constructor.name},enumerable:!1,configurable:!0}),t.prototype.what=function(){return this.message},t.prototype.toJSON=function(){return{name:this.name,message:this.message,stack:this.stack}},t}(Error);t.Exception=o},9014:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidArgument=void 0;var i=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(n(5501).LogicError);t.InvalidArgument=i},5501:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.LogicError=void 0;var i=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(n(269).Exception);t.LogicError=i},7632:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.OutOfRange=void 0;var i=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(n(5501).LogicError);t.OutOfRange=i},8925:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.greater_equal=t.greater=t.less_equal=t.less=t.not_equal_to=t.equal_to=void 0;var r=n(4682);function o(e,t){return e=e?e.valueOf():e,t=t?t.valueOf():t,e instanceof Object&&e.equals instanceof Function?e.equals(t):e===t}function i(e,t){return e=e.valueOf(),t=t.valueOf(),e instanceof Object?e.less instanceof Function?e.less(t):(0,r.get_uid)(e)<(0,r.get_uid)(t):e<t}function s(e,t){return i(e,t)||o(e,t)}t.equal_to=o,t.not_equal_to=function(e,t){return!o(e,t)},t.less=i,t.less_equal=s,t.greater=function(e,t){return!s(e,t)},t.greater_equal=function(e,t){return!i(e,t)}},9029:function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.hash=void 0;var o=n(4682);function i(e,t){return(t^=e?1:0)*u}function s(e,t){return a(e.toString(),t)}function a(e,t){for(var n=0;n<e.length;++n)t^=e.charCodeAt(n),t*=u;return Math.abs(t)}t.hash=function(){for(var e,t,n=[],l=0;l<arguments.length;l++)n[l]=arguments[l];var d=c;try{for(var f=r(n),h=f.next();!h.done;h=f.next()){var p=h.value,y=typeof(p=p?p.valueOf():p);if("boolean"===y)d=i(p,d);else if("number"===y||"bigint"===y)d=s(p,d);else if("string"===y)d=a(p,d);else if(p instanceof Object&&p.hashCode instanceof Function){var b=p.hashCode();if(1===n.length)return b;d^=b,d*=u}else d=s((0,o.get_uid)(p),d)}}catch(t){e={error:t}}finally{try{h&&!h.done&&(t=f.return)&&t.call(f)}finally{if(e)throw e.error}}return Math.abs(d)};var c=2166136261,u=16777619},4682:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get_uid=void 0;var r=n(4931);t.get_uid=function(e){if(e instanceof Object){if(!1===e.hasOwnProperty("__get_m_iUID")){var t=++(0,r._Get_root)().__s_iUID;Object.defineProperty(e,"__get_m_iUID",{value:function(){return t}})}return e.__get_m_iUID()}return void 0===e?-1:0}},4931:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._Get_root=void 0;var r=n(4922);t._Get_root=function(){return null===o&&void 0===(o=(0,r.is_node)()?n.g:self).__s_iUID&&(o.__s_iUID=0),o};var o=null},2644:function(e,t){"use strict";var n=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.IAssociativeContainer=void 0,(t.IAssociativeContainer||(t.IAssociativeContainer={})).construct=function(e){for(var t,o,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];return i.length>=1&&i[0]instanceof Array?(t=function(){var t=i[0];e.push.apply(e,r([],n(t),!1))},o=i.slice(1)):i.length>=2&&i[0].next instanceof Function&&i[1].next instanceof Function?(t=function(){var t=i[0],n=i[1];e.assign(t,n)},o=i.slice(2)):(t=null,o=i),{ramda:t,tail:o}}},4970:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.IHashContainer=void 0;var i=n(2644),s=n(9029),a=n(8925);(t.IHashContainer||(t.IHashContainer={})).construct=function(e,t,n){for(var c=[],u=3;u<arguments.length;u++)c[u-3]=arguments[u];var l=null,d=s.hash,f=a.equal_to;if(1===c.length&&c[0]instanceof t){var h=c[0];d=h.hash_function(),f=h.key_eq(),l=function(){var t=h.begin(),n=h.end();e.assign(t,n)}}else{var p=i.IAssociativeContainer.construct.apply(i.IAssociativeContainer,o([e],r(c),!1));l=p.ramda,p.tail.length>=1&&(d=p.tail[0]),p.tail.length>=2&&(f=p.tail[1])}n(d,f),null!==l&&l()}},9753:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.MapElementList=void 0;var s=n(7647),a=n(2918),c=n(5709),u=function(e){function t(t){var n=e.call(this)||this;return n.associative_=t,n}return o(t,e),t.prototype._Create_iterator=function(e,n,r){return t.Iterator.create(this,e,n,r)},t._Swap_associative=function(e,t){var n;n=i([t.associative_,e.associative_],2),e.associative_=n[0],t.associative_=n[1]},t.prototype.associative=function(){return this.associative_},t}(s.ListContainer);t.MapElementList=u,function(e){var t=function(e){function t(t,n,r,o){var i=e.call(this,n,r,o)||this;return i.list_=t,i}return o(t,e),t.create=function(e,n,r,o){return new t(e,n,r,o)},t.prototype.reverse=function(){return new n(this)},t.prototype.source=function(){return this.list_.associative()},Object.defineProperty(t.prototype,"first",{get:function(){return this.value.first},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"second",{get:function(){return this.value.second},set:function(e){this.value.second=e},enumerable:!1,configurable:!0}),t}(a.ListIterator);e.Iterator=t;var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype._Create_neighbor=function(e){return new t(e)},Object.defineProperty(t.prototype,"first",{get:function(){return this.base_.first},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"second",{get:function(){return this.base_.second},set:function(e){this.base_.second=e},enumerable:!1,configurable:!0}),t}(c.ReverseIterator);e.ReverseIterator=n}(u=t.MapElementList||(t.MapElementList={})),t.MapElementList=u},7976:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.SetElementList=void 0;var s=n(7647),a=n(2918),c=n(5709),u=function(e){function t(t){var n=e.call(this)||this;return n.associative_=t,n}return o(t,e),t.prototype._Create_iterator=function(e,n,r){return t.Iterator.create(this,e,n,r)},t._Swap_associative=function(e,t){var n;n=i([t.associative_,e.associative_],2),e.associative_=n[0],t.associative_=n[1]},t.prototype.associative=function(){return this.associative_},t}(s.ListContainer);t.SetElementList=u,function(e){var t=function(e){function t(t,n,r,o){var i=e.call(this,n,r,o)||this;return i.source_=t,i}return o(t,e),t.create=function(e,n,r,o){return new t(e,n,r,o)},t.prototype.reverse=function(){return new n(this)},t.prototype.source=function(){return this.source_.associative()},t}(a.ListIterator);e.Iterator=t;var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype._Create_neighbor=function(e){return new t(e)},t}(c.ReverseIterator);e.ReverseIterator=n}(u=t.SetElementList||(t.SetElementList={})),t.SetElementList=u},7647:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.ListContainer=void 0;var s=n(2278),a=n(2918),c=n(7489),u=n(9932),l=n(6937),d=n(1566),f=function(e){function t(){var t=e.call(this)||this;return t.end_=t._Create_iterator(null,null),t.clear(),t}return o(t,e),t.prototype.assign=function(e,t){this.clear(),this.insert(this.end(),e,t)},t.prototype.clear=function(){a.ListIterator._Set_prev(this.end_,this.end_),a.ListIterator._Set_next(this.end_,this.end_),this.begin_=this.end_,this.size_=0},t.prototype.resize=function(e){var t=e-this.size();t>0?this.insert(this.end(),t,void 0):t<0&&this.erase((0,l.advance)(this.end(),-t),this.end())},t.prototype.begin=function(){return this.begin_},t.prototype.end=function(){return this.end_},t.prototype.size=function(){return this.size_},t.prototype.push_front=function(e){this.insert(this.begin_,e)},t.prototype.push_back=function(e){this.insert(this.end_,e)},t.prototype.pop_front=function(){if(!0===this.empty())throw d.ErrorGenerator.empty(this.end_.source().constructor.name,"pop_front");this.erase(this.begin_)},t.prototype.pop_back=function(){if(!0===this.empty())throw d.ErrorGenerator.empty(this.end_.source().constructor.name,"pop_back");this.erase(this.end_.prev())},t.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return this.size();var n=new u.NativeArrayIterator(e,0),r=new u.NativeArrayIterator(e,e.length);return this._Insert_by_range(this.end(),n,r),this.size()},t.prototype.insert=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e.source()!==this.end_.source())throw d.ErrorGenerator.not_my_iterator(this.end_.source(),"insert");if(!0===e.erased_)throw d.ErrorGenerator.erased_iterator(this.end_.source(),"insert");return 1===t.length?this._Insert_by_repeating_val(e,1,t[0]):2===t.length&&"number"==typeof t[0]?this._Insert_by_repeating_val(e,t[0],t[1]):this._Insert_by_range(e,t[0],t[1])},t.prototype._Insert_by_repeating_val=function(e,t,n){var r=new c.Repeater(0,n),o=new c.Repeater(t);return this._Insert_by_range(e,r,o)},t.prototype._Insert_by_range=function(e,t,n){for(var r=e.prev(),o=null,i=0,s=t;!1===s.equals(n);s=s.next()){var c=this._Create_iterator(r,null,s.value);0===i&&(o=c),a.ListIterator._Set_next(r,c),r=c,++i}return!0===e.equals(this.begin())&&(this.begin_=o),a.ListIterator._Set_next(r,e),a.ListIterator._Set_prev(e,r),this.size_+=i,o},t.prototype.erase=function(e,t){return void 0===t&&(t=e.next()),this._Erase_by_range(e,t)},t.prototype._Erase_by_range=function(e,t){if(e.source()!==this.end_.source())throw d.ErrorGenerator.not_my_iterator(this.end_.source(),"insert");if(!0===e.erased_)throw d.ErrorGenerator.erased_iterator(this.end_.source(),"insert");if(e.equals(this.end_))return this.end_;var n=e.prev();a.ListIterator._Set_next(n,t),a.ListIterator._Set_prev(t,n);for(var r=e;!r.equals(t);r=r.next())r.erased_=!0,--this.size_;return e.equals(this.begin_)&&(this.begin_=t),t},t.prototype.swap=function(e){var t,n,r;t=i([e.begin_,this.begin_],2),this.begin_=t[0],e.begin_=t[1],n=i([e.end_,this.end_],2),this.end_=n[0],e.end_=n[1],r=i([e.size_,this.size_],2),this.size_=r[0],e.size_=r[1]},t}(s.Container);t.ListContainer=f},1566:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorGenerator=void 0;var r=n(9014),o=n(7632);!function(e){function t(e){if("string"==typeof e)return e;var t=e.constructor.name;return e.constructor.__MODULE&&(t="".concat(e.constructor.__MODULE,".").concat(t)),"std.".concat(t)}e.get_class_name=t,e.empty=function(e,n){return new o.OutOfRange("Error on ".concat(t(e),".").concat(n,"(): it's empty container."))},e.negative_index=function(e,n,r){return new o.OutOfRange("Error on ".concat(t(e),".").concat(n,"(): parametric index is negative -> (index = ").concat(r,")."))},e.excessive_index=function(e,n,r,i){return new o.OutOfRange("Error on ".concat(t(e),".").concat(n,"(): parametric index is equal or greater than size -> (index = ").concat(r,", size: ").concat(i,")."))},e.not_my_iterator=function(e,n){return new r.InvalidArgument("Error on ".concat(t(e),".").concat(n,"(): parametric iterator is not this container's own."))},e.erased_iterator=function(e,n){return new r.InvalidArgument("Error on ".concat(t(e),".").concat(n,"(): parametric iterator, it already has been erased."))},e.negative_iterator=function(e,n,r){return new o.OutOfRange("Error on ".concat(t(e),".").concat(n,"(): parametric iterator is directing negative position -> (index = ").concat(r,")."))},e.iterator_end_value=function(e,n){void 0===n&&(n="end");var r=t(e);return new o.OutOfRange("Error on ".concat(r,".Iterator.value: cannot access to the ").concat(r,".").concat(n,"().value."))},e.key_nout_found=function(e,n,r){throw new o.OutOfRange("Error on ".concat(t(e),".").concat(n,"(): unable to find the matched key -> ").concat(r))}}(t.ErrorGenerator||(t.ErrorGenerator={}))},1663:function(e,t){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.HashBuckets=void 0;var r=function(){function e(e,t){this.fetcher_=e,this.hasher_=t,this.max_load_factor_=i,this.data_=[],this.size_=0,this.initialize()}return e.prototype.clear=function(){this.data_=[],this.size_=0,this.initialize()},e.prototype.rehash=function(e){var t,r,i,s;e=Math.max(e,o);for(var a=[],c=0;c<e;++c)a.push([]);try{for(var u=n(this.data_),l=u.next();!l.done;l=u.next()){var d=l.value;try{for(var f=(i=void 0,n(d)),h=f.next();!h.done;h=f.next()){var p=h.value;a[this.hasher_(this.fetcher_(p))%a.length].push(p)}}catch(e){i={error:e}}finally{try{h&&!h.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}}}catch(e){t={error:e}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}this.data_=a},e.prototype.reserve=function(e){e>this.capacity()&&(e=Math.floor(e/this.max_load_factor_),this.rehash(e))},e.prototype.initialize=function(){for(var e=0;e<o;++e)this.data_.push([])},e.prototype.length=function(){return this.data_.length},e.prototype.capacity=function(){return this.data_.length*this.max_load_factor_},e.prototype.at=function(e){return this.data_[e]},e.prototype.load_factor=function(){return this.size_/this.length()},e.prototype.max_load_factor=function(e){if(void 0===e&&(e=null),null===e)return this.max_load_factor_;this.max_load_factor_=e},e.prototype.hash_function=function(){return this.hasher_},e.prototype.index=function(e){return this.hasher_(this.fetcher_(e))%this.length()},e.prototype.insert=function(e){var t=this.capacity();++this.size_>t&&this.reserve(2*t);var n=this.index(e);this.data_[n].push(e)},e.prototype.erase=function(e){for(var t=this.index(e),n=this.data_[t],r=0;r<n.length;++r)if(n[r]===e){n.splice(r,1),--this.size_;break}},e}();t.HashBuckets=r;var o=10,i=1},3136:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.MapHashBuckets=void 0;var a=function(e){function t(t,n,r){var o=e.call(this,c,n)||this;return o.source_=t,o.key_eq_=r,o}return o(t,e),t._Swap_source=function(e,t){var n;n=i([t.source_,e.source_],2),e.source_=n[0],t.source_=n[1]},t.prototype.key_eq=function(){return this.key_eq_},t.prototype.find=function(e){var t,n,r=this.hash_function()(e)%this.length(),o=this.at(r);try{for(var i=s(o),a=i.next();!a.done;a=i.next()){var c=a.value;if(this.key_eq_(c.first,e))return c}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return this.source_.end()},t}(n(1663).HashBuckets);function c(e){return e.first}t.MapHashBuckets=a},6449:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.SetHashBuckets=void 0;var a=function(e){function t(t,n,r){var o=e.call(this,c,n)||this;return o.source_=t,o.key_eq_=r,o}return o(t,e),t._Swap_source=function(e,t){var n;n=i([t.source_,e.source_],2),e.source_=n[0],t.source_=n[1]},t.prototype.key_eq=function(){return this.key_eq_},t.prototype.find=function(e){var t,n,r=this.hash_function()(e)%this.length(),o=this.at(r);try{for(var i=s(o),a=i.next();!a.done;a=i.next()){var c=a.value;if(this.key_eq_(c.value,e))return c}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return this.source_.end()},t}(n(1663).HashBuckets);function c(e){return e.value}t.SetHashBuckets=a},2918:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListIterator=void 0;var r=n(1566),o=function(){function e(e,t,n){this.prev_=e,this.next_=t,this.value_=n}return e._Set_prev=function(e,t){e.prev_=t},e._Set_next=function(e,t){e.next_=t},e.prototype.prev=function(){return this.prev_},e.prototype.next=function(){return this.next_},Object.defineProperty(e.prototype,"value",{get:function(){return this._Try_value(),this.value_},enumerable:!1,configurable:!0}),e.prototype._Try_value=function(){if(void 0===this.value_&&!0===this.equals(this.source().end()))throw r.ErrorGenerator.iterator_end_value(this.source())},e.prototype.equals=function(e){return this===e},e}();t.ListIterator=o},5709:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReverseIterator=void 0;var n=function(){function e(e){this.base_=e.prev()}return e.prototype.source=function(){return this.base_.source()},e.prototype.base=function(){return this.base_.next()},Object.defineProperty(e.prototype,"value",{get:function(){return this.base_.value},enumerable:!1,configurable:!0}),e.prototype.prev=function(){return this._Create_neighbor(this.base().next())},e.prototype.next=function(){return this._Create_neighbor(this.base_)},e.prototype.equals=function(e){return this.base_.equals(e.base_)},e}();t.ReverseIterator=n},7428:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ForOfAdaptor=void 0;var n=function(){function e(e,t){this.it_=e,this.last_=t}return e.prototype.next=function(){if(this.it_.equals(this.last_))return{done:!0,value:void 0};var e=this.it_;return this.it_=this.it_.next(),{done:!1,value:e.value}},e.prototype[Symbol.iterator]=function(){return this},e}();t.ForOfAdaptor=n},9932:function(e,t){"use strict";var n=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.NativeArrayIterator=void 0;var r=function(){function e(e,t){this.data_=e,this.index_=t}return e.prototype.index=function(){return this.index_},Object.defineProperty(e.prototype,"value",{get:function(){return this.data_[this.index_]},enumerable:!1,configurable:!0}),e.prototype.prev=function(){return--this.index_,this},e.prototype.next=function(){return++this.index_,this},e.prototype.advance=function(e){return this.index_+=e,this},e.prototype.equals=function(e){return this.data_===e.data_&&this.index_===e.index_},e.prototype.swap=function(e){var t,r;t=n([e.data_,this.data_],2),this.data_=t[0],e.data_=t[1],r=n([e.index_,this.index_],2),this.index_=r[0],e.index_=r[1]},e}();t.NativeArrayIterator=r},7489:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Repeater=void 0;var n=function(){function e(e,t){this.index_=e,this.value_=t}return e.prototype.index=function(){return this.index_},Object.defineProperty(e.prototype,"value",{get:function(){return this.value_},enumerable:!1,configurable:!0}),e.prototype.next=function(){return++this.index_,this},e.prototype.equals=function(e){return this.index_===e.index_},e}();t.Repeater=n},6937:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.next=t.prev=t.advance=t.distance=t.size=t.empty=void 0;var r=n(9014);function o(e,t){if(0===t)return e;if(e.advance instanceof Function)return e.advance(t);var n;if(t<0){if(!(e.prev instanceof Function))throw new r.InvalidArgument("Error on std.advance(): parametric iterator is not a bi-directional iterator, thus advancing to negative direction is not possible.");n=function(e){return e.prev()},t=-t}else n=function(e){return e.next()};for(;t-- >0;)e=n(e);return e}t.empty=function(e){return e instanceof Array?0!==e.length:e.empty()},t.size=function(e){return e instanceof Array?e.length:e.size()},t.distance=function(e,t){if(e.index instanceof Function)return function(e,t){var n=e.index(),r=t.index();return e.base instanceof Function?n-r:r-n}(e,t);for(var n=0;!e.equals(t);e=e.next())++n;return n},t.advance=o,t.prev=function(e,t){return void 0===t&&(t=1),1===t?e.prev():o(e,-t)},t.next=function(e,t){return void 0===t&&(t=1),1===t?e.next():o(e,t)}},9430:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Entry=void 0;var r=n(9029),o=n(8925),i=function(){function e(e,t){this.first=e,this.second=t}return e.prototype.equals=function(e){return(0,o.equal_to)(this.first,e.first)},e.prototype.less=function(e){return(0,o.less)(this.first,e.first)},e.prototype.hashCode=function(){return(0,r.hash)(this.first)},e}();t.Entry=i},5351:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.make_pair=t.Pair=void 0;var r=n(9029),o=n(8925),i=function(){function e(e,t){this.first=e,this.second=t}return e.prototype.equals=function(e){return(0,o.equal_to)(this.first,e.first)&&(0,o.equal_to)(this.second,e.second)},e.prototype.less=function(e){return!1===(0,o.equal_to)(this.first,e.first)?(0,o.less)(this.first,e.first):(0,o.less)(this.second,e.second)},e.prototype.hashCode=function(){return(0,r.hash)(this.first,this.second)},e}();t.Pair=i,t.make_pair=function(e,t){return new i(e,t)}},4922:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.is_node=void 0;var r=null;t.is_node=function(){return null===r&&(r="object"==typeof n.g&&"object"==typeof n.g.process&&"object"==typeof n.g.process.versions&&void 0!==n.g.process.versions.node),r}},5995:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(5840),a=n(1112),c=n(9653),u=n(4164),l=n(4584),d=n(5025),f=function(e){function t(n,r){var o=e.call(this)||this;return o.on_={},o.state_=t.CONNECTING,o.client_=new s.client,o.client_.on("connect",o._Handle_connect.bind(o)),o.client_.on("connectFailed",o._Handle_error.bind(o)),"string"==typeof r&&(r=[r]),o.client_.connect(n,r),o}return o(t,e),t.prototype.close=function(e,n){this.state_=t.CLOSING,void 0===e?this.connection_.sendCloseFrame():this.connection_.sendCloseFrame(e,n,!0)},t.prototype.send=function(e){if("string"==typeof e.valueOf())this.connection_.sendUTF(e);else{var t;t=e instanceof Buffer?e:e instanceof Blob?new Buffer(e,"blob"):e.buffer?new Buffer(e.buffer):new Buffer(e),this.connection_.sendBytes(t)}},Object.defineProperty(t.prototype,"url",{get:function(){return this.client_.url.href},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"protocol",{get:function(){return this.client_.protocols?this.client_.protocols[0]:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extensions",{get:function(){return this.connection_&&this.connection_.extensions?this.connection_.extensions[0].name:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readyState",{get:function(){return this.state_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bufferedAmount",{get:function(){return this.connection_.bytesWaitingToFlush},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"binaryType",{get:function(){return"arraybuffer"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onopen",{get:function(){return this.on_.open},set:function(e){this._Set_on("open",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onclose",{get:function(){return this.on_.close},set:function(e){this._Set_on("close",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onmessage",{get:function(){return this.on_.message},set:function(e){this._Set_on("message",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onerror",{get:function(){return this.on_.error},set:function(e){this._Set_on("error",e)},enumerable:!0,configurable:!0}),t.prototype._Set_on=function(e,t){this.on_[e]&&this.removeEventListener(e,this.on_[e]),this.addEventListener(e,t),this.on_[e]=t},t.prototype._Handle_connect=function(e){this.connection_=e,this.state_=t.OPEN,this.connection_.on("message",this._Handle_message.bind(this)),this.connection_.on("error",this._Handle_error.bind(this)),this.connection_.on("close",this._Handle_close.bind(this));var n=new c.Event("open",h);this.dispatchEvent(n)},t.prototype._Handle_close=function(e,n){var r=new u.CloseEvent("close",i({},h,{code:e,reason:n}));this.state_=t.CLOSED,this.dispatchEvent(r)},t.prototype._Handle_message=function(e){var t=new l.MessageEvent("message",i({},h,{data:e.binaryData?e.binaryData:e.utf8Data}));this.dispatchEvent(t)},t.prototype._Handle_error=function(e){var n=new d.ErrorEvent("error",i({},h,{error:e,message:e.message}));this.state_===t.CONNECTING&&(this.state_=t.CLOSED),this.dispatchEvent(n)},t}(a.EventTarget);t.WebSocket=f,function(e){e.CONNECTING=0,e.OPEN=1,e.CLOSING=2,e.CLOSED=3}(f=t.WebSocket||(t.WebSocket={})),t.WebSocket=f;var h={bubbles:!1,cancelable:!1}},4164:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,n){return e.call(this,t,n)||this}return o(t,e),t}(n(9653).Event);t.CloseEvent=i},5025:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,n){return e.call(this,t,n)||this}return o(t,e),t}(n(9653).Event);t.ErrorEvent=i},9653:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Event=function(e,t){this.type=e,t&&Object.assign(this,t)}},1112:function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(5017),i=n(1266),s=function(){function e(){this.listeners_=new i.HashMap,this.created_at_=new Date}return e.prototype.dispatchEvent=function(e){var t,n,o=this.listeners_.find(e.type);if(!o.equals(this.listeners_.end())){e.target=this,e.timeStamp=(new Date).getTime()-this.created_at_.getTime();try{for(var i=r(o.second),s=i.next();!s.done;s=i.next())(0,s.value)(e)}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}},e.prototype.addEventListener=function(e,t){var n=this.listeners_.find(e);n.equals(this.listeners_.end())&&(n=this.listeners_.emplace(e,new o.HashSet).first),n.second.insert(t)},e.prototype.removeEventListener=function(e,t){var n=this.listeners_.find(e);n.equals(this.listeners_.end())||(n.second.erase(t),n.second.empty()&&this.listeners_.erase(n))},e}();t.EventTarget=s},4584:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,n){return e.call(this,t,n)||this}return o(t,e),t}(n(9653).Event);t.MessageEvent=i},6445:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(4922).is_node()&&(n.g.WebSocket=n(5995).WebSocket)},5840:(e,t,n)=>{var r;if("object"==typeof globalThis)r=globalThis;else try{r=n(284)}catch(e){}finally{if(r||"undefined"==typeof window||(r=window),!r)throw new Error("Could not determine global this")}var o=r.WebSocket||r.MozWebSocket,i=n(9387);function s(e,t){return t?new o(e,t):new o(e)}o&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(s,e,{get:function(){return o[e]}})})),e.exports={w3cwebsocket:o?s:null,version:i}},9387:(e,t,n)=>{e.exports=n(9794).version},9794:e=>{"use strict";e.exports={version:"1.0.34"}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n(8519)})();